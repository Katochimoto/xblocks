<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <link rel="stylesheet" type="text/css" href="../bower_components/xblocks/build/xblocks.css" />

    <script src="../bower_components/es5-shim/es5-shim.js"></script>
    <script src="../bower_components/x-tag-core/dist/x-tag-core.js"></script>
    <script src="../bower_components/react/react-with-addons.js"></script>
    <script src="../bower_components/xblocks-core/xblocks-core.js"></script>


    <script src="../bower_components/xblocks/build/xblocks.js"></script>
    <script src="//code.jquery.com/jquery-2.1.0.min.js"></script>
    <title>Button</title>
</head>
<body>

<script>
    (function(global) {
        var hash = {};
        var log = [];

        global.cons = {};

        cons.time = function(name, timeStart) {
            hash[name] = timeStart || Date.now();
        };

        cons.timeEnd = function(name) {
            if (!hash.hasOwnProperty(name)) {
                return;
            }

            var date = Date.now();

            log.push([name, hash[name], date]);
        };

        cons.getLog = function() {
            return log;
        };

        cons.output = function() {
            var el = document.createElement('div');
            var htmlLog = log.map(function(item) {
                return '<div><b>' + item[0] + ':</b>&nbsp;' + (item[2] - item[1]) + '</div>';
            });

            el.innerHTML = htmlLog.join('');

            var body = document.querySelector('body');
            body.insertBefore(el, body.firstChild);
        };
    }(window));
</script>

<script>
    var timeStart = Date.now();
    cons.time('window.onload', timeStart);
    cons.time('DOMComponentsLoaded', timeStart);
    cons.time('DOM ready', timeStart);
    cons.time('innerHTML', timeStart);
    cons.time('xb-created', timeStart);

    cons.time('init', timeStart);
    cons.time('inserted', timeStart);
    cons.time('created', timeStart);

    window.addEventListener('xb-created', function() {
        cons.timeEnd('xb-created');
    });

    $(function() {
        cons.timeEnd('DOM ready');
    });

    $(document).on('DOMComponentsLoaded', function() {
        cons.timeEnd('DOMComponentsLoaded');
    });
</script>

<div id="content1"></div>

<script>
    var html = [];
    for (var i = 0; i < 200; i++) {
        html.push('<xb-button>Обычная кнопка ' + i + '</xb-button>');
    }
    document.getElementById('content1').innerHTML = html.join('');
</script>

<script>
    cons.timeEnd('innerHTML');
</script>

<script>
    window.onload = function() {
        cons.timeEnd('window.onload');

        setTimeout(function() {
            cons.output();
        }, 5000);
    };
</script>

</body>
</html>
