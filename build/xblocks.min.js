!function(e,t){"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:function(e){"use strict";if(e===t||null===e)throw new TypeError("Cannot convert first argument to object");for(var n=Object(e),o=1,i=arguments.length;i>o;o++){var s=arguments[o];if(s!==t&&null!==s)for(var r=Object.keys(Object(s)),a=0,l=r.length;l>a;a++){var c=r[a],p=Object.getOwnPropertyDescriptor(s,c);p!==t&&p.enumerable&&(n[c]=s[c])}}return n}})}(function(){return this||(1,eval)("this")}()),function(e){"use strict";for(var t,n=0,o=["ms","moz","webkit","o"],i=0;4>i&&!e.requestAnimationFrame;++i)t=o[i],e.requestAnimationFrame=e[t+"RequestAnimationFrame"],e.cancelAnimationFrame=e[t+"CancelAnimationFrame"]||e[t+"CancelRequestAnimationFrame"];e.requestAnimationFrame||(e.requestAnimationFrame=function(t){var o=Date.now(),i=Math.max(0,16-(o-n)),s=e.setTimeout(function(){t(o+i)},i);return n=o+i,s}),e.cancelAnimationFrame||(e.cancelAnimationFrame=function(t){e.clearTimeout(t)})}(function(){return this||(1,eval)("this")}()),function(e,t){"use strict";e.xblocks=e.xblocks||{};var n=e.xblocks;n.utils=n.utils||{},n.dom=n.dom||{},n.event=n.event||{};var o=e.document,i=o.documentElement,s=Array.prototype.indexOf,r=Array.prototype.pop,a=Array.prototype.slice,l=Object.prototype.hasOwnProperty;n.utils.debounce=function(o,i,s){function r(){f&&e.clearTimeout(f),u&&e.clearTimeout(u),u=f=b=t}function a(){var n=i-(Date.now()-m);if(0>=n||n>i){u&&e.clearTimeout(u);var s=b;u=f=b=t,s&&(_=Date.now(),h=o.apply(d,p),f||u||(p=d=null))}else f=e.setTimeout(a,n)}function l(){f&&e.clearTimeout(f),u=f=b=t,(v||g!==i)&&(_=Date.now(),h=o.apply(d,p),f||u||(p=d=null))}function c(){p=arguments,m=Date.now(),d=this,b=v&&(f||!y);var t,n;if(g===!1)t=y&&!f;else{u||y||(_=m);var s=g-(m-_);n=0>=s||s>g,n?(u&&(u=e.clearTimeout(u)),_=m,h=o.apply(d,p)):u||(u=e.setTimeout(l,s))}return n&&f?f=e.clearTimeout(f):f||i===g||(f=e.setTimeout(a,i)),t&&(n=!0,h=o.apply(d,p)),!n||f||u||(p=d=null),h}var p,u,h,m,d,f,b,_=0,g=!1,v=!1,y=!0;if("function"!=typeof o)throw new TypeError("Expected a function");return i=0>i?0:Number(i||250),s===!0?(y=!0,v=!1):n.utils.isPlainObject(s)&&(y=s.leading,g=s.hasOwnProperty("maxWait")&&Math.max(Number(s.maxWait||0),i),v=s.hasOwnProperty("trailing")?Boolean(s.trailing):v),c.cancel=r,c},n.tag.pseudos.debounce={onCompiled:function(e,t){var o=t.arguments.length,i=Number(t.arguments[0]),s=!0,r=!1;return o>1&&(s="true"===t.arguments[1]),o>2&&(r="true"===t.arguments[2]),n.utils.debounce(e,i,{leading:s,trailing:r})}},n.utils.throttle=function(e,t,o){t=Number(t||250);var i=!0,s=!1;if("function"!=typeof e)throw new TypeError("Expected a function");o===!1?i=!1:n.utils.isPlainObject(o)&&(i=o.hasOwnProperty("leading")?Boolean(o.leading):i,s=o.hasOwnProperty("trailing")?Boolean(o.trailing):s);var r={leading:i,maxWait:Number(t),trailing:s};return n.utils.debounce(e,t,r)},n.tag.pseudos.throttle={onCompiled:function(e,t){var o=t.arguments.length,i=Number(t.arguments[0]),s=!0,r=!1;return o>1&&(s="true"===t.arguments[1]),o>2&&(r="true"===t.arguments[2]),n.utils.throttle(e,i,{leading:s,trailing:r})}},n.utils.microtask=function(){var t=0,n=[],i=o.createTextNode(""),s=e.MutationObserver||e.JsMutationObserver;return new s(function(){for(;n.length;)n.shift()()}).observe(i,{characterData:!0}),function(e){i.textContent=t++,n.push(e)}}(),n.utils.throttleAnimationFrame=function(t,n){var o=0,i=function(){o=0};return function(){o||(o=e.requestAnimationFrame(i),t.apply(n||this,arguments))}},n.utils.filterObject=function(e,t){var n={},o={},i=!1;return Object.keys(e).forEach(function(n){var s=Object.getOwnPropertyDescriptor(e,n);t&&t(n,s)&&(o[n]=s,i=!0)}),i&&Object.defineProperties(n,o),n},n.utils.mapObject=function(e,t){var o={},i={},s=!1;return Object.keys(e).forEach(function(o){var r=Object.getOwnPropertyDescriptor(e,o),a=t&&t(o,r);"object"===n.utils.type(a)&&(i[a.name]=a.descr,s=!0)}),s&&Object.defineProperties(o,i),o},n.utils.isEmptyObject=function(e){if("object"===n.utils.type(e))for(var t in e)if(l.call(e,t))return!1;return!0},n.utils.isWindow=function(e){return null!==e&&e===e.window},n.utils.uid=function(){return e.Math.floor(268435456*(1+e.Math.random())).toString(36)},n.utils.Table=function(e,o){this._options=n.utils.merge({col:"xb-menu:not([disabled])",row:"xb-menuitem:not([disabled])",colLoop:!1,rowLoop:!1},o),this._node=e,this._item=t,this._originalEvent=t,this._onKeydown=this._onKeydown.bind(this),this._onMouseover=n.event.delegate(this._options.row,this._onMouseover.bind(this)),this._onMouseout=n.event.delegate(this._options.row,this._onMouseout.bind(this)),this._onMousemove=n.utils.throttle(n.event.delegate(this._options.row,this._onMouseAction.bind(this))),this._onClick=n.event.filterClick("left",n.event.delegate(this._options.row,this._onMouseAction.bind(this))),this._bind()},n.utils.Table.prototype={EVENT_BLUR:"xb-blur",EVENT_FOCUS:"xb-focus",destroy:function(){this._unbind(),this._node=t,this._originalEvent=t,this._item&&n.event.dispatch(this._item,this.EVENT_BLUR)},getItem:function(){return this._item},blurItem:function(){this._item&&(n.event.dispatch(this._item,this.EVENT_BLUR),this._item=t)},_bind:function(){this._node.addEventListener("keydown",this._onKeydown,!1),this._node.addEventListener("click",this._onClick,!1),this._node.addEventListener("mouseover",this._onMouseover,!1),this._node.addEventListener("mouseout",this._onMouseout,!1),this._node.addEventListener("mousemove",this._onMousemove,!1)},_unbind:function(){this._node.removeEventListener("keydown",this._onKeydown,!1),this._node.removeEventListener("click",this._onClick,!1),this._node.removeEventListener("mouseover",this._onMouseover,!1),this._node.removeEventListener("mouseout",this._onMouseout,!1),this._node.removeEventListener("mousemove",this._onMousemove,!1)},_col:function(e){if(e)for(var t=e;t=t.parentNode;){if(n.dom.matchesSelector(t,this._options.col))return t;if(t===this._node)break}},_colFirst:function(){return this._node.querySelector(this._options.col)||this._node},_colLast:function(){return r.call(a.call(this._node.querySelectorAll(this._options.col)))||this._node},_colMatchIterate:function(e,t){return n.dom.matchesSelector(t,this._options.col)?(e.col=t,!1):void 0},_colNext:function(e){var t={};return n.dom.eachAfter(e,this._colMatchIterate.bind(this,t),this._node,!1),t.col},_colPrev:function(e){var t={};return n.dom.eachBefore(e,this._colMatchIterate.bind(this,t),this._node,!1),t.col},_rowFirst:function(e){return e.querySelector(this._options.row)},_rowLast:function(e){return r.call(a.call(e.querySelectorAll(this._options.row)))},_rowMatchIterate:function(e,t){return n.dom.matchesSelector(t,this._options.row)?(e.row=t,!1):void 0},_rowNext:function(e){var t={};return n.dom.eachAfter(e,this._rowMatchIterate.bind(this,t),this._col(e),!1),t.row},_rowPrev:function(e){var t={};return n.dom.eachBefore(e,this._rowMatchIterate.bind(this,t),this._col(e),!1),t.row},_rowIndex:function(e){return n.dom.index(this._options.row,e,this._col(e))},_rowByIndex:function(e,t){return e.querySelectorAll(this._options.row)[t]},_focus:function(e){e!==this._item&&(this._item&&n.event.dispatch(this._item,this.EVENT_BLUR,{detail:{originalEvent:this._originalEvent}}),this._item=e,n.event.dispatch(this._item,this.EVENT_FOCUS,{detail:{originalEvent:this._originalEvent}}))},_onKeydown:function(e){if(!(e.altKey||e.metaKey||e.shiftKey)){var t;switch(e.keyCode){case 37:t="_onArrowLeft";break;case 38:t="_onArrowUp";break;case 39:t="_onArrowRight";break;case 40:t="_onArrowDown"}t&&(e.preventDefault(),e.stopPropagation(),this._originalEvent=e,this[t]())}},_onMouseAction:function(e){this._item&&this._item===e.delegateElement||(this._originalEvent=e,this._focus(e.delegateElement))},_onMouseover:function(e){n.event.filterMouseEnter(e.delegateElement,e,this._onMouseAction.bind(this))},_onMouseout:function(e){n.event.filterMouseLeave(e.delegateElement,e,this._onMouseAction.bind(this))},_onArrowLeft:function(){if(this._item){var e=this._rowIndex(this._item),t=this._colPrev(this._col(this._item));t||(t=this._colLast(),this._options.colLoop||e--);var n=this._rowByIndex(t,e);n||(n=this._rowLast(t)),this._focus(n)}else this._focus(this._rowFirst(this._colFirst()))},_onArrowRight:function(){if(this._item){var e=this._rowIndex(this._item),t=this._colNext(this._col(this._item));t||(t=this._colFirst(),this._options.colLoop||e++);var n=this._rowByIndex(t,e);n||(n=this._rowFirst(t)),this._focus(n)}else this._focus(this._rowFirst(this._colFirst()))},_onArrowUp:function(){if(this._item){var e=this._rowPrev(this._item);if(!e){var t;t=this._options.rowLoop?this._col(this._item):this._colPrev(this._col(this._item))||this._colLast(),e=this._rowLast(t)}this._focus(e)}else this._focus(this._rowFirst(this._colFirst()))},_onArrowDown:function(){if(this._item){var e=this._rowNext(this._item);if(!e){var t;t=this._options.rowLoop?this._col(this._item):this._colNext(this._col(this._item))||this._colFirst(),e=this._rowFirst(t)}this._focus(e)}else this._focus(this._rowFirst(this._colFirst()))}},n.utils.lazyFocus=function(t){e.setImmediate(t.focus.bind(t))},n.utils.SpeechRecognition=function(e){this._events={},this._params={},this._started=!1,this._engine=new webkitSpeechRecognition,this._applyParams(e,{continuous:!1,interimResults:!1,lang:"en-US",maxAlternatives:1});for(var t in this._engineEvents)this._engine[t]=this._engineEvents[t].bind(this)},n.utils.SpeechRecognition.prototype={_engineEvents:{onend:function(e){e.detail={"final":this._transcript},this._trigger("end",e)},onerror:function(e){this._trigger("error",e)},onresult:function(e){for(var t="",n=e.resultIndex;n<e.results.length;++n){var o=e.results[n];o.isFinal?this._transcript+=o[0].transcript:t+=o[0].transcript}e.detail={"final":this._transcript},this._params.interimResults&&(e.detail.interim=t),this._trigger("result",e)},onstart:function(e){this._trigger("start",e)}},toggle:function(e,t){e?this.start(t):this.stop()},start:function(e){this._started||(this._started=!0,this._transcript="",this._applyParams(e),this._engine.start())},stop:function(){this._started&&(this._started=!1,this._engine.stop())},abort:function(){this._started=!1,this._engine.abort()},addEventListener:function(e,t,n){this._events[e]||(this._events[e]=[]),this._events[e].push([t,n])},removeEventListener:function(e,t){this._events[e]&&(t?this._events[e]=this._events[e].filter(this._filterEventsIterator,t):delete this._events[e])},_filterEventsIterator:function(e){return e[0]!==this},_applyParams:function(e,t){Object.assign(this._params,t,e);for(var n in this._params)this._engine[n]=this._params[n]},_trigger:function(t,n){this._events[t]&&e.setImmediate(this._triggerAsync.bind(this,this._events[t],n))},_triggerAsync:function(e,t){for(var n,o=0;o<e.length;o++)n=e[o],n[0].call(n[1],t)}},n.dom.index=function(e,t,n){return n=n||o,s.call(n.querySelectorAll(e),t)},n.dom.isParent=function(){return"compareDocumentPosition"in i?function(e,t){return 16==(16&e.compareDocumentPosition(t))}:"contains"in i?function(e,t){return e!==t&&e.contains(t)}:function(e,t){for(;t=t.parentNode;)if(t===e)return!0;return!1}}(),n.dom.matchesSelector=function(){var t=e.Element.prototype,n=t.matches||t.matchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||function(e){return-1!==s.call((this.parentNode||this.ownerDocument).querySelectorAll(e),this)};return function(e,t){return 1===e.nodeType?n.call(e,t):!1}}(),n.dom.eachInnerFollowing=function(e,t){for(var n,o,i,s=[e];n=s.pop();){if(o=t&&t(n,s),"undefined"!=typeof o&&!o)return!1;if("next"!==o&&1===n.nodeType&&n.hasChildNodes())for(i=n.childNodes.length;i--;)s.push(n.childNodes[i])}return!0},n.dom.eachInnerPrevious=function(e,t){for(var n,o,i,s,r=[e];n=r.pop();){if(o=t&&t(n,r),"undefined"!=typeof o&&!o)return!1;if("next"!==o&&1===n.nodeType&&n.hasChildNodes())for(s=n.childNodes.length,i=0;s>i;i++)r.push(n.childNodes[i])}return!0},n.dom.eachBefore=function(e,t,o,i){i="undefined"==typeof i?!0:Boolean(i);var s,r;do{if(o&&!n.dom.isParent(o,e))return;for(s=e;s=s.previousSibling;)if(r=i?n.dom.eachInnerPrevious(s,t):t&&t(s),"undefined"!=typeof r&&!r)return!1}while(e=e.parentNode)},n.dom.eachAfter=function(e,t,o,i){i="undefined"==typeof i?!0:Boolean(i);var s,r;do{if(o&&!n.dom.isParent(o,e))return;for(s=e;s=s.nextSibling;)if(r=i?n.dom.eachInnerFollowing(s,t):t&&t(s),"undefined"!=typeof r&&!r)return!1}while(e=e.parentNode)},n.dom.cleanHTML=function(){var e=function(e){e.parentNode.removeChild(e)},t=o.implementation;return function(n){var o=t.createHTMLDocument("").body;return o.innerHTML=n,__forEach.call(o.querySelectorAll("script,style,img"),e),o.innerHTML}}(),n.dom.removeChild=function(e){return e.parentNode?e.parentNode.removeChild(e):void 0},n.event._clickWhich={1:"left",2:"center",3:"right"},n.event.wrap=function(e){return e.xbWrapped?e:(e.xbWrapped=!0,e.srcElement&&!e.target&&(e.target=e.srcElement),!e.relatedTarget&&e.fromElement&&(e.relatedTarget=e.fromElement===e.target?e.toElement:e.fromElement),!l.call(e,"pageX")&&l.call(e,"clientX")&&(e.pageX=e.clientX,e.pageY=e.clientY,i?(e.pageX+=i.scrollLeft-(i.clientLeft||0),e.pageY+=i.scrollTop-(i.clientTop||0)):o.body&&(e.pageX+=o.body.scrollLeft,e.pageY+=o.body.scrollTop)),!e.which&&e.button&&(1&e.button?e.which=1:4&e.button?e.which=2:2&e.button&&(e.which=3)),e.which&&(e.whichStr=n.event._clickWhich[e.which]),e)},n.event.delegateMatch=function(e,t){if(t&&t.tagName){var o;if(n.dom.matchesSelector(t,e))o=t;else if(n.dom.matchesSelector(t,e+" *"))for(var i=t.parentNode;i;){if(n.dom.matchesSelector(i,e)){o=i;break}i=i.parentNode}return o}},n.event.delegate=function(e,t){return function(o){n.event.wrap(o);var i=n.event.delegateMatch(e,o.target);i&&(o.delegateElement=i,t.call(i,o))}},n.event.filterClick=function(e,t){return e=Array.isArray(e)?e:[e],function(o){"click"===o.type&&(n.event.wrap(o),-1!==e.indexOf(o.whichStr)&&t.call(this,o))}},n.event.filterMouseEnter=function(e,t,o){n.event.wrap(t);for(var i=t.relatedTarget;i&&i!==e;)i=i.parentNode;return i!==e?o.call(e,t):void 0},n.event.filterMouseLeave=n.event.filterMouseEnter}(function(){return this||(1,eval)("this")}()),function(e,t){"use strict";e.xb={},e.xv={};var n=e.Tether,o=e.React,i=e.xblocks,s=e.xb,r=e.xv,a=e.document,l=function(){},c=Array.prototype.forEach;!function(){function e(){for(var t="",n=0;n<arguments.length;n++){var o=arguments[n];if(o){var i=typeof o;if("string"===i||"number"===i)t+=" "+o;else if(Array.isArray(o))t+=" "+e.apply(null,o);else if("object"===i)for(var s in o)o.hasOwnProperty(s)&&o[s]&&(t+=" "+s)}}return t.substr(1)}"undefined"!=typeof module&&module.exports?module.exports=e:"function"==typeof define&&"object"==typeof define.amd&&define.amd?define(function(){return e}):window.classNames=e}(),i.utils=i.utils||{},i.utils.REG_PROPS_PREFIX_LINK=/^xb-link-/,i.utils.REG_PROPS_PREFIX_ICO=/^xb-ico-/,i.utils.filterPropsPrefixLink=function(e){return i.utils.REG_PROPS_PREFIX_LINK.test(e)},i.utils.filterLinkProps=function(e){return i.utils.mapObject(i.utils.filterObject(e,i.utils.filterPropsPrefixLink),i.utils.mapPropsPrefixLink)},i.utils.mapPropsPrefixLink=function(e,t){return{name:e.replace(i.utils.REG_PROPS_PREFIX_LINK,""),descr:t}},i.utils.filterPropsPrefixIco=function(e){return i.utils.REG_PROPS_PREFIX_ICO.test(e)},i.utils.filterIcoProps=function(e){return i.utils.mapObject(i.utils.filterObject(e,i.utils.filterPropsPrefixIco),i.utils.mapPropsPrefixIco)},i.utils.mapPropsPrefixIco=function(e,t){return{name:e.replace(i.utils.REG_PROPS_PREFIX_ICO,""),descr:t}},i.utils.exportPropTypes=function(e){var t,n=i.utils.propTypes(e),o={},s=e+"-";for(t in n)n.hasOwnProperty(t)&&"_"!==t[0]&&(o[s+t]=n[t]);return{propTypes:o}},function(){var e={};i.utils.resetLastRadioChecked=function(t,n){n=String(n);var o=e[n];o&&o!==t&&(o.checked=!1),e[n]=t}}(),i.utils.getParentMenu=function(e){for(var t=e;t;){if("xb-menu"===t.xtagName||"xb-menu-inline"===t.xtagName)return t;t=t.parentNode}return null},i.mixin=i.mixin||{},i.mixin.eDisabled={accessors:{disabled:{attribute:{"boolean":!0}}}},i.mixin.eChecked={accessors:{checked:{attribute:{"boolean":!0}}}},i.mixin.eInputValueState={accessors:{value:{attribute:{name:"value"},get:function(){var e=this.xblock&&this.xblock.getMountedComponent();return e&&"undefined"!=typeof e.state.value?e.state.value:String(this.getAttribute("value")||this.defaultValue||"")},set:function(e){var t=this.xblock&&this.xblock.getMountedComponent();t&&t.setState({value:String(e)})}},defaultValue:{get:function(){return""}}}},i.mixin.eInputValueProps={accessors:{value:{attribute:{name:"value"},get:function(){return String(this.getAttribute("value")||this.defaultValue||"")}},defaultValue:{get:function(){return""}}}},i.mixin.eFocus={methods:{focus:function(){this.firstChild.focus()},blur:function(){this.firstChild.blur()}}},i.mixin.eMenu={events:{"click:delegate(xb-menuitem:not([disabled]))":function(){this.submenuInstance&&this.submenuInstance.open()},"keydown:keypass(13,39)":function(){var e=this._xbFocus.getItem();e&&e.submenuInstance&&e.submenuInstance.open()},"jsx-scroll-throttle":function(e){e.stopImmediatePropagation(),i.utils.lazyFocus(this)}},accessors:{hasOpenSubmenu:{get:function(){return Boolean(this.querySelector(".xb-menu-target.xb-menu-enabled"))}}},methods:{scrollIntoItem:function(e){if(i.dom.isParent(this,e)){var t=this.xblock&&this.xblock.getMountedComponent();t&&t.scrollIntoItem(e)}}}},i.mixin.vCommonAttrs={propTypes:{accesskey:o.PropTypes.string,contextmenu:o.PropTypes.string,dir:o.PropTypes.oneOf(["ltr","rtl"]),disabled:o.PropTypes.bool,hidden:o.PropTypes.bool,spellcheck:o.PropTypes.bool,tabindex:o.PropTypes.string,title:o.PropTypes.string}},i.mixin.vMenu={getInitialState:function(){return{maxHeight:0,isShowScrollTop:!1,isShowScrollBottom:!1}},componentWillMount:function(){this._enterTopFrame=0,this._enterBottomFrame=0,this._lockScroll=!1,this._onScroll=i.utils.throttleAnimationFrame(this._onScroll),this._onScrollThrottle=i.utils.throttle(this._onScrollThrottle,500,{leading:!0,trailing:!1})},componentWillReceiveProps:function(e){e.size!==this.props.size&&this._updateMaxHeight(e.size)},_updateMaxHeight:function(e,t){e=Number(e);var n=0;if(e>0){var i=o.findDOMNode(this.refs.content),s=i.children[e-1];if(s){var r=i.getBoundingClientRect(),a=s.getBoundingClientRect();n=a.top+a.height+i.scrollTop-r.top}}this.setState({maxHeight:n},this._redrawScrollNavigator.bind(this,t))},_redrawScrollNavigator:function(e){var t=o.findDOMNode(this.refs.content),n=5,i=Math.max(t.scrollHeight,t.clientHeight),s=t.scrollTop>n,r=t.scrollTop+t.clientHeight<i-n;this.setState({isShowScrollTop:s,isShowScrollBottom:r},this._redrawScrollNavigatorSuccess.bind(this,e))},_redrawScrollNavigatorSuccess:function(e){this.state.isShowScrollTop||this._onMouseLeaveTop(),this.state.isShowScrollBottom||this._onMouseLeaveBottom(),e&&e()},_onWheel:function(e){var t=o.findDOMNode(this.refs.content),n=e.deltaY,i=t.scrollTop,s=t.offsetHeight,r=t.scrollHeight;(0>n&&0===i||n>0&&i+s>=r||s===r)&&(e.preventDefault(),e.nativeEvent.stopImmediatePropagation())},_onScroll:function(){this._lockScroll||(this._lockScroll=!0,this._onScrollThrottle(),this._redrawScrollNavigator(this._onScrollSuccess))},_onScrollSuccess:function(){this._lockScroll=!1},_onScrollThrottle:function(){i.event.dispatch(o.findDOMNode(this.refs.content),"jsx-scroll-throttle",{bubbles:!0,cancelable:!0})},_animationScrollTop:function(){o.findDOMNode(this.refs.content).scrollTop--,this._enterTopFrame=e.requestAnimationFrame(this._animationScrollTop)},_onMouseEnterTop:function(){this._onMouseLeaveTop(),this._animationScrollTop()},_onMouseLeaveTop:function(){this._enterTopFrame&&(e.cancelAnimationFrame(this._enterTopFrame),this._enterTopFrame=0)},_animationScrollBottom:function(){o.findDOMNode(this.refs.content).scrollTop++,this._enterBottomFrame=e.requestAnimationFrame(this._animationScrollBottom)},_onMouseEnterBottom:function(){this._onMouseLeaveBottom(),this._animationScrollBottom()},_onMouseLeaveBottom:function(){this._enterBottomFrame&&(e.cancelAnimationFrame(this._enterBottomFrame),this._enterBottomFrame=0)},scrollIntoItem:function(e){var t=o.findDOMNode(this.refs.content),n=t.getBoundingClientRect(),i=e.getBoundingClientRect();if(!(i.top<n.bottom&&i.bottom>n.top)){var s=0;i.top>=n.bottom?s=i.bottom-n.bottom:i.bottom<=n.top&&(s=i.top-n.top),t.scrollTop=t.scrollTop+s}},render:function(){var e={_popup:!0};e=classNames(e);var t={display:this.state.isShowScrollTop?"block":"none"},n={display:this.state.isShowScrollBottom?"block":"none"},i={maxHeight:this.state.maxHeight?this.state.maxHeight+"px":"none"};return o.createElement("div",{className:e,tabIndex:"0"},o.createElement("div",{style:t,className:"_popup-scroll-top",onMouseEnter:this._onMouseEnterTop,onMouseLeave:this._onMouseLeaveTop}),o.createElement("div",{ref:"content",style:i,className:"_popup-content",onScroll:this._onScroll,onWheel:this._onWheel,"data-xb-content":this.props._uid,dangerouslySetInnerHTML:{__html:this.props.children.trim()}}),o.createElement("div",{style:n,className:"_popup-scroll-bottom",onMouseEnter:this._onMouseEnterBottom,onMouseLeave:this._onMouseLeaveBottom}))}},r.Ico=i.view.register("xb-ico",[i.mixin.vCommonAttrs,{displayName:"xb-ico",mixins:[o.addons.PureRenderMixin],propTypes:{active:o.PropTypes.bool,size:o.PropTypes.oneOf(["s","m"]),value:o.PropTypes.string,type:o.PropTypes.oneOf(["attention","check","close","download","download-white","dropdown","eye","help","link","link-white","mail","mic-off","mic-on","notification","odnoklassniki","pause","people","play","print","remove","services","settings","three-dots","trash","trash-white","twitter","upload","upload-white","vk"])},getDefaultProps:function(){return{active:!1,children:String.fromCharCode(160),disabled:!1,size:"s"}},render:function(){var e={"xb-ico":!0,_active:this.props.active,_disabled:this.props.disabled};this.props.type&&(e["_type-"+this.props.type]=!0),this.props.size&&(e["_size-"+this.props.size]=!0),e=classNames(e);var t=this.props.value||this.props.children;return o.createElement("span",{className:e,"data-xb-content":this.props._uid},t)}}]),s.Ico=i.create("xb-ico",[i.mixin.eDisabled,{accessors:{active:{attribute:{"boolean":!0}}}}]),r.Link=i.view.register("xb-link",[i.mixin.vCommonAttrs,{displayName:"xb-link",mixins:[o.addons.PureRenderMixin],propTypes:{href:o.PropTypes.string,name:o.PropTypes.string,target:o.PropTypes.oneOf(["_self","_blank","_parent","_top"]),theme:o.PropTypes.oneOf(["normal","outer","pseudo","empty"])},getDefaultProps:function(){return{disabled:!1,tabindex:"1",target:"_self",theme:"normal"}},render:function(){var e={"xb-link":!0,_disabled:this.props.disabled};this.props.theme&&(e["_theme-"+this.props.theme]=!0);var t=this.props.tabindex;this.props.disabled&&(t="-1"),e=classNames(e);var n=this.props.value||this.props.children;return o.createElement("a",{name:this.props.name,href:this.props.href,target:this.props.target,tabIndex:t,className:e,"data-xb-content":this.props._uid},n)}}]),s.Link=i.create("xb-link",[i.mixin.eDisabled,{prototype:Object.create(HTMLAnchorElement.prototype)}]),r.ButtonContent=i.view.create({displayName:"xb-button_content",propTypes:{ico:o.PropTypes.object},getDefaultProps:function(){return{ico:{}}},shouldComponentUpdate:function(e){return!i.utils.equals(e,this.props)},render:function(){var e=i.utils.merge({},this.props.ico),t=[o.createElement("span",{className:"_content-content",key:"content","data-xb-content":this.props._uid},this.props.children)];return!i.utils.isEmptyObject(e)&&e.type&&(e.key="ico",e.float&&"left"!==e.float?"right"===e.float&&t.push(o.createElement("xb-ico",e)):t.unshift(o.createElement("xb-ico",e))),o.createElement("span",{className:"_content"},t)}}),r.Button=i.view.register("xb-button",[i.mixin.vCommonAttrs,i.utils.exportPropTypes("xb-ico"),{displayName:"xb-button",mixins:[o.addons.PureRenderMixin],propTypes:{autofocus:o.PropTypes.bool,checked:o.PropTypes.bool,"for":o.PropTypes.string,form:o.PropTypes.string,href:o.PropTypes.string,multiple:o.PropTypes.bool,name:o.PropTypes.string,required:o.PropTypes.bool,size:o.PropTypes.oneOf(["s","m","l","xl"]),target:o.PropTypes.oneOf(["_blank","_self","_parent","_top"]),theme:o.PropTypes.oneOf(["action","dark","flying","normal","promo","pseudo-inverted","pseudo"]),type:o.PropTypes.oneOf(["label","inline","link","file","button","submit","checkbox","radio"]),value:o.PropTypes.string},getDefaultProps:function(){return{autofocus:!1,checked:!1,children:String.fromCharCode(160),disabled:!1,multiple:!1,required:!1,size:"m",tabindex:"0",theme:"normal",type:"button"}},getInitialState:function(){return{checked:this.props.checked}},componentWillReceiveProps:function(e){this.setState({checked:Boolean(e.checked)})},componentWillUpdate:function(e,t){"radio"===e.type&&t.checked&&i.utils.resetLastRadioChecked(this.container(),e.name)},componentWillMount:function(){"radio"===this.props.type&&this.state.checked&&i.utils.resetLastRadioChecked(this.container(),this.props.name)},_onChange:function(e){this.container().checked=e.target.checked},render:function(){var e={"xb-button":!0,_disabled:this.props.disabled};this.props.theme&&(e["_theme-"+this.props.theme]=!0),this.props.size&&(e["_size-"+this.props.size]=!0),e=classNames(e);var t=i.utils.filterIcoProps(this.props),n=this.props.tabindex,s=this.props.type;this.props.disabled&&(n="-1");var a=o.createElement(r.ButtonContent,{key:"content",_uid:this.props._uid,ico:t},this.props.children);if("link"===s)return o.createElement("a",{className:e,href:this.props.href,name:this.props.name,target:this.props.target,title:this.props.title,tabIndex:n},a);if("file"===s)return o.createElement("label",{className:e},o.createElement("span",{className:"_xb-file-intruder"},o.createElement("span",{className:"_xb-file-intruder-inner"},o.createElement("input",{className:"_xb-file-intruder-input",type:"file",name:this.props.name,title:this.props.title,disabled:this.props.disabled,multiple:this.props.multiple,autoFocus:this.props.autofocus,form:this.props.form,tabIndex:n}),o.createElement("span",{className:"_xb-file-intruder-focus"}))),a);if("label"===s||"checkbox"===s||"radio"===s){var l=[];if("checkbox"===s||"radio"===s){l.push(o.createElement("input",{key:"checkControl",type:s,className:"_xb-check_controller",name:this.props.name,value:this.props.value,form:this.props.form,disabled:this.props.disabled,defaultChecked:this.props.checked,checked:this.state.checked,autoFocus:this.props.autofocus,readOnly:!0,onChange:this._onChange,required:this.props.required,tabIndex:n}));var c=i.utils.merge({},this.props,{key:"content",type:"inline",tabindex:null});l.push(o.createElement(r.Button,c)),e=classNames({"xb-button":!0,"_theme-check":!0,_disabled:this.props.disabled})}else l.push(o.createElement("span",{key:"file-intruder",className:"_xb-file-intruder"},o.createElement("span",{className:"_xb-file-intruder-inner"},o.createElement("input",{className:"_xb-file-intruder-input",type:"button",form:this.props.form,disabled:this.props.disabled,autoFocus:this.props.autofocus,tabIndex:n}),o.createElement("span",{className:"_xb-file-intruder-focus"})))),l.push(a);return o.createElement("label",{className:e,htmlFor:this.props["for"],title:this.props.title},l)}return"inline"===s?o.createElement("span",{className:e,tabIndex:n},a):o.createElement("button",{className:e,type:s,form:this.props.form,title:this.props.title,name:this.props.name,value:this.props.value,tabIndex:n,disabled:this.props.disabled,autoFocus:this.props.autofocus},a)}}]),s.Button=i.create("xb-button",[i.mixin.eDisabled,i.mixin.eChecked,i.mixin.eInputValueProps,i.mixin.eFocus,{prototype:Object.create(HTMLInputElement.prototype),accessors:{defaultValue:{get:function(){var e=this.attrs.type;return"checkbox"===e||"radio"===e?"on":""}}}}]);var p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e};r.InputController=i.view.create({displayName:"xb-input_controller",mixins:[o.addons.PureRenderMixin],propTypes:{autoFocus:o.PropTypes.bool,autocomplete:o.PropTypes.oneOf(["on","off"]),autosize:o.PropTypes.bool,className:o.PropTypes.string,cols:o.PropTypes.string,disabled:o.PropTypes.bool,isPlaceholderHint:o.PropTypes.bool,multiline:o.PropTypes.bool,name:o.PropTypes.string,onChange:o.PropTypes.func,onHintToggle:o.PropTypes.func,placeholder:o.PropTypes.string,readOnly:o.PropTypes.bool,required:o.PropTypes.bool,rows:o.PropTypes.string,tabIndex:o.PropTypes.string,value:o.PropTypes.string},getDefaultProps:function(){return{autoFocus:!1,autosize:!1,disabled:!1,isPlaceholderHint:!1,multiline:!1,readOnly:!1,required:!1,value:t}},componentDidUpdate:function(e){this._recalculateSize(),this._dispatchEventToggleHint(e.value,this.props.value)},componentDidMount:function(){this._recalculateSize()},_dispatchEventToggleHint:function(e,t){if(this.props.isPlaceholderHint){var n=Boolean(e),o=Boolean(t);n^o&&this.props.onHintToggle(n&&!o)}},_recalculateSize:function(){if(this.props.autosize){var e=o.findDOMNode(this);this.props.multiline?(e.style.height="0px",e.style.height=e.scrollHeight+"px"):(e.style.width="20px",e.style.width=(e.scrollWidth<20?20:e.scrollWidth)+"px")}},render:function(){var e=this.props.tabIndex;this.props.disabled&&e&&(e="-1");var t={autoFocus:this.props.autoFocus,autocomplete:this.props.autocomplete,className:this.props.className,disabled:this.props.disabled,name:this.props.name,onChange:this.props.onChange,placeholder:this.props.placeholder||"",readOnly:this.props.readOnly,required:this.props.required,tabIndex:e,value:this.props.value};return this.props.multiline?o.createElement("textarea",p({},t,{rows:this.props.rows,cols:this.props.cols})):o.createElement("input",p({},t,{type:"text"}))}});var p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e};r.Input=i.view.register("xb-input",[i.mixin.vCommonAttrs,i.utils.exportPropTypes("xb-link"),{displayName:"xb-input",mixins:[o.addons.PureRenderMixin],propTypes:{autocomplete:o.PropTypes.oneOf(["on","off"]),autofocus:o.PropTypes.bool,autosize:o.PropTypes.bool,cols:o.PropTypes.string,ghost:o.PropTypes.bool,multiline:o.PropTypes.bool,name:o.PropTypes.string,placeholder:o.PropTypes.string,postfix:o.PropTypes.string,prefix:o.PropTypes.string,readonly:o.PropTypes.bool,required:o.PropTypes.bool,reset:o.PropTypes.bool,rows:o.PropTypes.string,size:o.PropTypes.oneOf(["s","m","l","xl"]),type:o.PropTypes.oneOf(["text","number","date","datetime","email","month","range","search","tel","time","url","week","color","wysiwyg"]),value:o.PropTypes.string,"xb-link":o.PropTypes.string},getDefaultProps:function(){return{autofocus:!1,autosize:!1,disabled:!1,ghost:!1,multiline:!1,readonly:!1,required:!1,reset:!1,rows:"4",size:"m",type:"text",value:t}},getInitialState:function(){return{value:this.props.value}},componentDidMount:function(){this.refs.controller._dispatchEventToggleHint("",this.props.value)},_onChange:function(e){this.setState({value:e.target.value})},_onHintToggle:function(e){o.findDOMNode(this.refs.placeholder).style.visibility=e?"inherit":"hidden"},_isComplex:function(){return Boolean(this.props.postfix||this.props.prefix||this.props.reset||this.props.autosize||this.props["xb-link"]||this.props.placeholder)},_onClickReset:function(){this.setState({value:""})},render:function(){var e=this._isComplex(),t={"xb-input":!0,_disabled:this.props.disabled,_autosize:this.props.autosize,_ghost:this.props.ghost,_complex:e,_simple:!e};this.props.size&&(t["_size-"+this.props.size]=!0),t=classNames(t);var n=!1,s={autoFocus:this.props.autofocus,autocomplete:this.props.autocomplete,autosize:this.props.autosize,className:"_controller",cols:this.props.cols,disabled:this.props.disabled,key:"controller",multiline:this.props.multiline,name:this.props.name,onChange:this._onChange,onHintToggle:this._onHintToggle,readOnly:this.props.readonly,ref:"controller",required:this.props.required,rows:this.props.rows,tabIndex:this.props.tabindex,value:this.state.value};
if(e){var a=[];if(this.props.placeholder&&(n=!0,a.push(o.createElement("span",{ref:"placeholder",key:"placeholder",className:"_hint"},o.createElement("span",{className:"_hint-inner"},this.props.placeholder)))),this.props["xb-link"]){var l=i.utils.filterLinkProps(this.props);l.theme="empty",l.key="label",a.push(o.createElement("xb-link",l,this.props["xb-link"]))}return this.props.prefix&&a.push(o.createElement("span",{key:"prefix",className:"_left"},this.props.prefix)),this.props.postfix&&a.push(o.createElement("span",{key:"postfix",className:"_right"},this.props.postfix)),this.props.reset&&a.push(o.createElement("span",{key:"reset",className:"_reset",onClick:this._onClickReset})),a.push(o.createElement("span",{key:"content",className:"_content"},o.createElement(r.InputController,p({},s,{isPlaceholderHint:n})),o.createElement("span",{key:"view",className:"_view"}))),o.createElement("label",{className:t},a)}return o.createElement(r.InputController,p({},s,{className:t,isPlaceholderHint:n}))}}]),s.Input=i.create("xb-input",[i.mixin.eDisabled,i.mixin.eInputValueState,i.mixin.eFocus,{prototype:Object.create(HTMLInputElement.prototype),events:{"xb-speech-recognition-start":function(e){console.log(e)},"xb-speech-recognition-result":function(e){e.detail&&(e.detail.interim&&(this.value+=e.detail.interim),e.detail.final&&(this.value=e.detail.final)),console.log(e)},"xb-speech-recognition-end":function(e){e.detail&&(this.value=e.detail.final),console.log(e)},"xb-speech-recognition-error":function(e){console.log(e)}}}]),r.Checkbox=i.view.register("xb-checkbox",[i.mixin.vCommonAttrs,{displayName:"xb-checkbox",mixins:[o.addons.PureRenderMixin],propTypes:{autofocus:o.PropTypes.bool,checked:o.PropTypes.bool,"for":o.PropTypes.string,form:o.PropTypes.string,name:o.PropTypes.string,required:o.PropTypes.bool,size:o.PropTypes.oneOf(["s","m"]),value:o.PropTypes.string},getDefaultProps:function(){return{autofocus:!1,checked:!1,children:"",disabled:!1,required:!1,size:"m",tabindex:"0",value:"on"}},getInitialState:function(){return{checked:this.props.checked}},componentWillReceiveProps:function(e){this.setState({checked:e.checked})},_onChange:function(e){this.setState({checked:e.target.checked})},render:function(){var e={"xb-checkbox":!0,_disabled:this.props.disabled};this.props.size&&(e["_size-"+this.props.size]=!0),e=classNames(e);var t=this.props.tabindex;return this.props.disabled&&(t="-1"),o.createElement("label",{className:e,title:this.props.title,htmlFor:this.props["for"]},o.createElement("input",{type:"checkbox",className:"_xb-check_controller",name:this.props.name,value:this.props.value,disabled:this.props.disabled,defaultChecked:this.props.checked,checked:this.state.checked,autoFocus:this.props.autofocus,readOnly:!0,onChange:this._onChange,required:this.props.required,tabIndex:t,form:this.props.form}),o.createElement("span",{className:"_xb-checkbox_flag _xb-check_flag"},o.createElement("span",{className:"_xb-checkbox_flag-icon"})),o.createElement("span",{"data-xb-content":this.props._uid},this.props.children))}}]),s.Checkbox=i.create("xb-checkbox",[i.mixin.eDisabled,i.mixin.eChecked,i.mixin.eInputValueProps,i.mixin.eFocus,{prototype:Object.create(HTMLInputElement.prototype),accessors:{defaultValue:{get:function(){return"on"}}}}]),r.Radio=i.view.register("xb-radio",[i.mixin.vCommonAttrs,{displayName:"xb-radio",mixins:[o.addons.PureRenderMixin],propTypes:{autofocus:o.PropTypes.bool,checked:o.PropTypes.bool,"for":o.PropTypes.string,form:o.PropTypes.string,name:o.PropTypes.string,required:o.PropTypes.bool,size:o.PropTypes.oneOf(["s","m"]),value:o.PropTypes.string},getDefaultProps:function(){return{autofocus:!1,checked:!1,children:"",disabled:!1,required:!1,size:"m",tabindex:"0",value:"on"}},getInitialState:function(){return{checked:this.props.checked}},componentWillReceiveProps:function(e){this.setState({checked:Boolean(e.checked)})},componentWillUpdate:function(e,t){t.checked&&i.utils.resetLastRadioChecked(this.container(),e.name)},componentWillMount:function(){this.state.checked&&i.utils.resetLastRadioChecked(this.container(),this.props.name)},_onChange:function(e){this.container().checked=e.target.checked},render:function(){var e={"xb-radio":!0,_disabled:this.props.disabled};this.props.size&&(e["_size-"+this.props.size]=!0),e=classNames(e);var t=this.props.tabindex;return this.props.disabled&&(t="-1"),o.createElement("label",{className:e,title:this.props.title,htmlFor:this.props["for"]},o.createElement("input",{type:"radio",className:"_xb-check_controller",name:this.props.name,value:this.props.value,disabled:this.props.disabled,defaultChecked:this.props.checked,checked:this.state.checked,autoFocus:this.props.autofocus,readOnly:!0,onChange:this._onChange,required:this.props.required,tabIndex:t,form:this.props.form}),o.createElement("span",{className:"_xb-radio_flag _xb-check_flag"},o.createElement("span",{className:"_xb-radio_flag-icon"})),o.createElement("span",{"data-xb-content":this.props._uid},this.props.children))}}]),s.Radio=i.create("xb-radio",[i.mixin.eDisabled,i.mixin.eChecked,i.mixin.eInputValueProps,i.mixin.eFocus,{prototype:Object.create(HTMLInputElement.prototype),accessors:{defaultValue:{get:function(){return"on"}}}}]),r.Popup=i.view.register("xb-popup",[i.mixin.vCommonAttrs,{displayName:"xb-popup",mixins:[o.addons.PureRenderMixin],propTypes:{close:o.PropTypes.bool,theme:o.PropTypes.oneOf(["normal","modal","island","error","blank"])},getDefaultProps:function(){return{close:!1,theme:"normal"}},_onClickClose:function(){i.event.dispatch(o.findDOMNode(this),"jsx-click-close",{bubbles:!0,cancelable:!0})},render:function(){var e=[o.createElement("div",{key:"content",className:"_content","data-xb-content":this.props._uid,dangerouslySetInnerHTML:{__html:this.props.children}})];e.unshift(this.template("xb-popup-title",{key:"title",className:"_title"})),this.props.close&&e.unshift(o.createElement("a",{key:"close",className:"_close",onClick:this._onClickClose})),e.push(this.template("xb-popup-buttons",{key:"buttons",className:"_buttons"}));var t={_popup:!0};return this.props.theme&&(t["_theme-"+this.props.theme]=!0),t=classNames(t),o.createElement("div",{className:t,tabIndex:"0"},e)}}]);var u={onOpen:function(){this.focus(),i.event.dispatch(this,"xb-open")},onClose:function(){this.blur(),i.event.dispatch(this,"xb-close")},checkDefaultAttr:function(e){return"undefined"!=typeof e},fillOptionsFromAttrs:function(e,t){for(var n in t){var o=u.tetherAttrsAlign[n];if(o){var i=o[0],s=o[1]||u.checkDefaultAttr,r=t[n];s(r)&&("function"==typeof i?i(e,r):e[i]=r)}}},tetherDefaultOptions:function(){return{attachment:"middle center",classes:{element:this.xtagName},classPrefix:this.xtagName,element:this,enabled:!1,optimizations:{gpu:!0},target:a.body,targetAttachment:"middle center",targetModifier:"visible"}},tetherAttrsAlign:{attachment:["attachment"],"target-attachment":["targetAttachment"],"target-offset":["targetOffset"],offset:["offset"],target:["target",function(t){return t&&("string"==typeof t||t instanceof e.HTMLElement)}],"target-parent":[function(e,t){e.target=t},function(t){return t&&t instanceof e.HTMLElement}],"target-modifier":[function(e,n){e.targetModifier="initial"===n?t:n},function(e){return"initial"===e||"visible"===e||"scroll-handle"===e}],"optimizations-gpu":[function(e,t){e.optimizations.gpu=t},function(e){return"boolean"==typeof e}],constraints:[function(e,t){e.constraints=JSON.parse(decodeURIComponent(t))},function(e){return e&&"string"==typeof e}]}};s.Popup=i.create("xb-popup",[i.mixin.eFocus,{prototype:Object.create(HTMLElement.prototype),events:{"jsx-click-close":function(e){e.stopImmediatePropagation(),this.close()},"keydown:keypass(27)":function(){this.close()}},accessors:{defaultOptions:{get:u.tetherDefaultOptions},options:{get:function(){if(this._options)return this._options;this._options=this.defaultOptions;var e=i.dom.attrs.get(this,{attachment:t,constraints:t,offset:t,"optimizations-gpu":!0,"target-attachment":t,"target-modifier":t,"target-offset":t,"target-parent":!1,target:t});return e["target-parent"]&&(e["target-parent"]=this.parentNode),u.fillOptionsFromAttrs(this._options,e),this._options}},tether:{get:function(){return this._tether||(this._tether=new n(this.options)),this._tether}},opened:{get:function(){return this.tether.enabled}}},methods:{setOptions:function(e){var t=this.tether;i.utils.assign(!0,this.options,e),t.setOptions(this.options,!1),t.enabled&&t.position()},open:function(t){var n=this.tether;return n.enabled?!1:("object"==typeof t&&this.setOptions(t),i.event.dispatch(this,"xb-before-open"),n.enable(!0),n.target._xbpopup=this,e.setImmediate(u.onOpen.bind(this)),!0)},close:function(){var n=this.tether;return n.enabled?(i.event.dispatch(this,"xb-before-close"),n.target._xbpopup=t,n.disable(),n.clearCache(),e.setImmediate(u.onClose.bind(this)),!0):!1},position:function(){return this.tether.position(),!0}}}]),r.Menuseparator=i.view.register("xb-menuseparator",{displayName:"xb-menuseparator",render:function(){return o.createElement("div",{className:"xb-menuseparator"})}}),s.Menuseparator=i.create("xb-menuseparator",[{prototype:Object.create(HTMLElement.prototype)}]),r.Menuitem=i.view.register("xb-menuitem",[i.utils.exportPropTypes("xb-ico"),i.mixin.vCommonAttrs,{displayName:"xb-menuitem",mixins:[o.addons.PureRenderMixin],propTypes:{focused:o.PropTypes.bool,ico:o.PropTypes.object,label:o.PropTypes.string.isRequired,selected:o.PropTypes.bool,submenu:o.PropTypes.bool},getDefaultProps:function(){return{disabled:!1,focused:!1,selected:!1,submenu:!1}},render:function(){var e={"xb-menuitem":!0,_disabled:this.props.disabled,_focused:this.props.focused,_selected:this.props.selected,_submenu:this.props.submenu};e=classNames(e);var t=[o.createElement("span",{className:"_label",key:"label"},this.props.label)],n=i.utils.filterIcoProps(this.props);return!i.utils.isEmptyObject(n)&&n.type&&(n.key="ico",n.float&&"left"!==n.float?"right"===n.float&&t.push(o.createElement("xb-ico",n)):t.unshift(o.createElement("xb-ico",n))),o.createElement("div",{className:e},t)}}]);var h={submenuAttrs:{attachment:"top left","target-attachment":"top right","target-modifier":"initial",constraints:encodeURIComponent(JSON.stringify([{to:"window",attachment:"element together"}]))},submenu:function(){var n=0;return{open:function(t){t&&!n&&(n=e.setTimeout(t.open.bind(t),200))},cancel:function(){n&&(e.clearTimeout(n),n=0)},remove:function(){this._submenuInstance&&(h.submenu.cancel(),this._submenuInstance.close(),i.dom.removeChild(this._submenuInstance),this._submenuInstance=t)}}}()};s.Menuitem=i.create("xb-menuitem",[i.mixin.eDisabled,i.mixin.eInputValueProps,{prototype:Object.create(HTMLElement.prototype),events:{"xb-created":function(){h.submenu.remove.call(this),this.submenu=Boolean(this.content.trim())},"xb-repaint":h.submenu.remove,"xb-destroy":h.submenu.remove,"xb-blur":function(){this.focused=!1,h.submenu.cancel();var e=this.submenuInstance;e&&e.opened&&i.utils.lazyFocus(this.menuInstance)},"xb-focus":function(e){this.focused=!0,"keydown"!==e.detail.originalEvent.type?h.submenu.open(this.submenuInstance):this.menuInstance.scrollIntoItem(this)}},accessors:{focused:{attribute:{"boolean":!0}},selected:{attribute:{"boolean":!0}},submenu:{attribute:{"boolean":!0}},menuInstance:{get:function(){return this._menuInstance||null===this._menuInstance?this._menuInstance:(this._menuInstance=i.utils.getParentMenu(this),this._menuInstance)}},submenuInstance:{get:function(){if(this._submenuInstance||null===this._submenuInstance)return this._submenuInstance;if(this._submenuInstance=null,this.submenu){var e="_menuitem-target-"+this.xuid,t=this.ownerDocument.createElement("xb-menu"),n=this.menuInstance.getAttribute("constraints"),o=i.utils.merge({target:"."+e},h.submenuAttrs);n&&(o.constraints=n);for(var s in o)t.setAttribute(s,o[s]);t.innerHTML=this.content,this.classList.add(e),this._submenuInstance=this.ownerDocument.body.appendChild(t)}return this._submenuInstance}}}}]),a.addEventListener("contextmenu",i.event.delegate("[contextmenu]",function(e){var n=e.delegateElement,o=n.ownerDocument,i=n.getAttribute("contextmenu"),s=i&&o.getElementById(i);if(s&&"xb-menu"===s.xtagName){e.preventDefault(),e.stopImmediatePropagation();var r="xb-contextmenu-target",a=o.getElementById(r);a?a._xbpopup&&a._xbpopup.close():(a=o.createElement("div"),a.id=r,a.style.position="absolute",a.style.visibility="hidden",o.body.appendChild(a)),a.style.top=e.pageY+"px",a.style.left=e.pageX+"px",s.open({target:a,attachment:"top left",targetAttachment:"bottom left",targetModifier:t,optimizations:{moveElement:!1},constraints:[{to:"scrollParent",attachment:"element"},{to:"window",attachment:"element"}]})}}),!1),r.Menu=i.view.register("xb-menu",[i.mixin.vCommonAttrs,i.mixin.vMenu,{displayName:"xb-menu",mixins:[o.addons.PureRenderMixin],propTypes:{size:o.PropTypes.string},getDefaultProps:function(){return{size:""}},afterOpen:function(e){this._updateMaxHeight(this.props.size,e)}}]);var m={closeSubmenu:function(e){e._xbpopup&&e._xbpopup.close()},tetherDefaultOptions:function(){var e=u.tetherDefaultOptions.call(this);return e.constraints=[{to:"scrollParent",attachment:"element"},{to:"window",attachment:"element"}],e}};s.Menu=i.create("xb-menu",[i.mixin.eMenu,{prototype:Object.create(s.Popup.prototype||new s.Popup),events:{"xb-before-open":function(){this.style.visibility="hidden"},"xb-open":function(){this._xbFocus=new i.utils.Table(this,{rowLoop:!0,colLoop:!0});var e=this.xblock.getMountedComponent();e?e.afterOpen(this._afterOpen.bind(this)):this._afterOpen()},"xb-close":function(){this._xbFocus&&(this._xbFocus.destroy(),this._xbFocus=t),this._closeAllSubmenu()},"keydown:keypass(27)":function(){this.close();var e=this.parentMenu;e&&i.utils.lazyFocus(e)},blur:function(){this.hasOpenSubmenu||(this.close(),e.setImmediate(this._closeUpFocus.bind(this)))}},accessors:{defaultOptions:{get:m.tetherDefaultOptions},parentMenu:{get:function(){return this.tether.target.menuInstance}},firstParentMenu:{get:function(){var e=this.parentMenu;return e?e.firstParentMenu||e:this}}},methods:{_closeAllSubmenu:function(){c.call(this.querySelectorAll(".xb-menu-target.xb-menu-enabled"),m.closeSubmenu)},_afterOpen:function(){this.position(),this.style.visibility="visible",i.utils.lazyFocus(this)},_closeUpFocus:function(){for(var e=i.utils.getParentMenu(this.ownerDocument.activeElement),t=this.parentMenu;t&&t!==e;)t.close(),t=t.parentMenu}}}]),r.MenuInline=i.view.register("xb-menu-inline",[i.mixin.vCommonAttrs,i.mixin.vMenu,{displayName:"xb-menu-inline",mixins:[o.addons.PureRenderMixin],propTypes:{size:o.PropTypes.string},getDefaultProps:function(){return{size:""}},componentDidMount:function(){this._updateMaxHeight(this.props.size)}}]);var d={init:function(){this._xbFocus&&this._xbFocus.destroy(),this._xbFocus=new i.utils.Table(this,{col:"xb-menu-inline:not([disabled])",rowLoop:!0,colLoop:!0})}};s.MenuInline=i.create("xb-menu-inline",[i.mixin.eFocus,i.mixin.eMenu,{prototype:Object.create(HTMLElement.prototype),events:{"xb-created":d.init,"xb-repaint":d.init,blur:function(){this.hasOpenSubmenu||this._xbFocus.blurItem()}},methods:{open:l,close:function(){i.utils.lazyFocus(this)}}}]),r.Select=i.view.register("xb-select",[i.mixin.vCommonAttrs,{displayName:"xb-select",propTypes:{autocapitalize:o.PropTypes.oneOf(["on","off"]),autocomplete:o.PropTypes.oneOf(["on","off"]),autocorrect:o.PropTypes.oneOf(["on","off"]),autofocus:o.PropTypes.bool,form:o.PropTypes.string,multiple:o.PropTypes.bool,name:o.PropTypes.string,required:o.PropTypes.bool,size:o.PropTypes.string},getDefaultProps:function(){return{autofocus:!1,disabled:!1,multiple:!1,required:!1,tabindex:"1"}},componentDidMount:function(){new n({element:o.findDOMNode(this.refs.dropdown),target:o.findDOMNode(this.refs.control),attachment:"top left",targetAttachment:"bottom left",classPrefix:"xb-dialog",constraints:[{to:"window",attachment:"together none"}],optimizations:{gpu:!1},classes:{element:"xb-dialog"}})},render:function(){var e={"xb-select":!0,_disabled:this.props.disabled};e=classNames(e);var t=this.props.tabindex;return this.props.disabled&&(t="-1"),o.createElement("div",{className:e},o.createElement("input",{className:"_controller"}),o.createElement(r.Button,{ref:"control",type:"inline"}),o.createElement("div",{ref:"dropdown",className:"_xb-select-dropdown"},o.createElement("ul",{className:"_group"},o.createElement("li",{className:"_item"},o.createElement("a",{className:"_item-control"},"1")),o.createElement("li",{className:"_item"},o.createElement("a",{className:"_item-control"},"2")),o.createElement("li",{className:"_item"},o.createElement("a",{className:"_item-control"},"3")))))}}]),s.Select=i.create("xb-select",[i.mixin.eDisabled,i.mixin.eFocus,{prototype:Object.create(HTMLSelectElement.prototype)}]),r.Calendar=i.view.register("xb-calendar",[i.mixin.vCommonAttrs,{displayName:"xb-calendar",mixins:[o.addons.PureRenderMixin],propTypes:{startWeekDay:o.PropTypes.string},getDefaultProps:function(){return{startWeekDay:"1"}},render:function(){this.datetime=moment();var e=Number(this.props.startWeekDay),t=this.datetime.daysInMonth(),n=this.datetime.date(1).day(),i=n-e;0>i&&(i=7+i);var s=this.datetime.date(t).day(),r=6-s+e;r>6&&(r=0);return o.createElement("div",null)}}]),s.Calendar=i.create("xb-calendar"),r.SpeechRecognition=i.view.register("xb-speech-recognition",[i.mixin.vCommonAttrs,{displayName:"xb-speech-recognition",propTypes:{active:o.PropTypes.bool},getDefaultProps:function(){return{active:!1,disabled:!1}},render:function(){var e={"xb-speech-recognition":!0,_active:this.props.active,_disabled:this.props.disabled};return e=classNames(e),o.createElement("xb-ico",{className:e,type:this.props.active?"mic-on":"mic-off"})}}]);var f={events:{end:1,error:1,result:1,start:1}};s.SpeechRecognition=i.create("xb-speech-recognition",[i.mixin.eDisabled,{prototype:Object.create(HTMLElement.prototype),events:{"xb-created":function(){this._xbRecognition=new i.utils.SpeechRecognition({lang:this.lang||e.navigator&&e.navigator.language||"en-US",continuous:this.continuous,interimResults:this.interimResults});for(var t in f.events)this._xbRecognition.addEventListener(t,this._sendEventToTarget,this);this._xbRecognition.toggle(this.state.active)},"xb-update":function(){this._xbRecognition.toggle(this.state.active)},"xb-destroy":function(){for(var e in f.events)this._xbRecognition.removeEventListener(e,this._sendEventToTarget);this._xbRecognition.abort(),this._xbRecognition=t},click:function(){this.active=!this.active}},accessors:{active:{attribute:{"boolean":!0}},lang:{attribute:{name:"lang"}},continuous:{attribute:{"boolean":!0}},interimResults:{attribute:{"boolean":!0,name:"interim-results"}},target:{attribute:{name:"target"}}},methods:{_sendEventToTarget:function(e){var t=this.target,n=typeof t,o=new i.event.Custom("xb-speech-recognition-"+e.type,{bubbles:!1,cancelable:!1,detail:e.detail});"function"===n?t(o):("string"===n&&(t=a.querySelector(t)),t instanceof HTMLElement&&t.dispatchEvent(o))}}}])}(function(){return this||(1,eval)("this")}());