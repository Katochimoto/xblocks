<<<<<<< HEAD
!function(e,t){"use strict";function s(){this._submenu&&(this._submenu.close(),this._submenu.parentNode.removeChild(this._submenu),this._submenu=t)}function i(e){e.xbPopup&&e.xbPopup.close()}var o=e.Tether,r=e.React,n=e.xblocks;n.utils.REG_PROPS_PREFIX_LINK=/^xb-link-/,n.utils.REG_PROPS_PREFIX_ICO=/^xb-ico-/,n.utils.filterPropsPrefixLink=function(e){return n.utils.REG_PROPS_PREFIX_LINK.test(e)},n.utils.mapPropsPrefixLink=function(e,t){return{name:e.replace(n.utils.REG_PROPS_PREFIX_LINK,""),descr:t}},n.utils.filterPropsPrefixIco=function(e){return n.utils.REG_PROPS_PREFIX_ICO.test(e)},n.utils.mapPropsPrefixIco=function(e,t){return{name:e.replace(n.utils.REG_PROPS_PREFIX_ICO,""),descr:t}},n.utils.exportPropTypes=function(e){var t=n.utils.propTypes(e),s={},i=e+"-";for(var o in t)t.hasOwnProperty(o)&&"_"!==o[0]&&(s[i+o]=t[o]);return{propTypes:s}},function(){var e={};n.utils.resetLastRadioChecked=function(t,s){if(t._rootNodeID){s=String(s);var i=e[s];if(i&&i!==t._rootNodeID){var o=r.__internals.Mount.findReactContainerForID(i);o&&(o.checked=!1)}e[s]=t._rootNodeID}}}(),n.mixin={},n.mixin.eDisabled={accessors:{disabled:{attribute:{"boolean":!0}}}},n.mixin.eChecked={accessors:{checked:{attribute:{"boolean":!0}}},events:{change:function(e){this.checked=e.target.checked}}},n.mixin.eInputValueState={accessors:{value:{get:function(){if(this.mounted)return this.xblock._component.state.value;var e=this.querySelector("input,textarea");return e?e.value:""},set:function(e){if(this.mounted)this.xblock._component.setState({value:String(e)});else{var t=this.querySelector("input,textarea");t&&(t.value=String(e))}}}}},n.mixin.eInputValueProps={accessors:{value:{attribute:{name:"value"},get:function(){return""+(this.getAttribute("value")||this.defaultValue||"")}},defaultValue:{get:function(){return""}}}},n.mixin.eFocus={methods:{focus:function(){this.firstChild.focus()},blur:function(){this.firstChild.blur()}}},n.mixin.vChecked={isChecked:function(){return this.refs.checkControl?this.refs.checkControl.getDOMNode().checked:void 0},setChecked:function(e){this.refs.checkControl&&(this.refs.checkControl.getDOMNode().checked=Boolean(e))}},n.mixin.vCommonAttrs={propTypes:{accesskey:r.PropTypes.string,contextmenu:r.PropTypes.string,dir:r.PropTypes.oneOf(["ltr","rtl"]),hidden:r.PropTypes.bool,spellcheck:r.PropTypes.bool,tabindex:r.PropTypes.string,title:r.PropTypes.string}},n.view.register("xb-ico",{displayName:"xb-ico",propTypes:{id:r.PropTypes.string,"class":r.PropTypes.string,alt:r.PropTypes.string,title:r.PropTypes.string,value:r.PropTypes.string,tabindex:r.PropTypes.string,children:r.PropTypes.renderable,size:r.PropTypes.oneOf(["s","m"]),type:r.PropTypes.oneOf(["attention","close","check","download","download-white","dropdown","eye","link","link-white","mail","notification","odnoklassniki","pause","people","play","print","remove","services","settings","three-dots","trash","trash-white","twitter","help","upload","upload-white","vk"]),active:r.PropTypes.bool,disabled:r.PropTypes.bool},getDefaultProps:function(){return{size:"s",children:String.fromCharCode(160)}},render:function(){var e={"xb-ico":!0,_active:this.props.active,_disabled:this.props.disabled};this.props.type&&(e["_type-"+this.props.type]=!0),this.props.size&&(e["_size-"+this.props.size]=!0),e=r.addons.classSet(e);var t=this.props.tabindex;this.props.disabled&&(t="-1");var s=this.props.value||this.props.children;return r.DOM.span({className:e,title:this.props.title,tabIndex:t,"data-xb-content":this.props._uid},s)}}),n.create("xb-ico",[n.mixin.eDisabled,{accessors:{active:{get:function(){return n.dom.attrs.valueConversion("active",this.getAttribute("active"),r.PropTypes.bool)},set:function(e){e?this.setAttribute("active",""):this.removeAttribute("active")}}}}]),n.view.register("xb-link",{displayName:"xb-link",propTypes:{id:r.PropTypes.string,"class":r.PropTypes.string,disabled:r.PropTypes.bool,href:r.PropTypes.string,name:r.PropTypes.string,tabindex:r.PropTypes.string,target:r.PropTypes.oneOf(["_self","_blank","_parent","_top"]),theme:r.PropTypes.oneOf(["normal","outer","pseudo","input"])},getDefaultProps:function(){return{theme:"normal",tabindex:"1"}},render:function(){var e={"xb-link":!0,_disabled:this.props.disabled};this.props.theme&&(e["_theme-"+this.props.theme]=!0);var t=this.props.tabindex;this.props.disabled&&(t="-1"),e=r.addons.classSet(e);var s=this.props.value||this.props.children;return r.DOM.a({id:this.props.id,name:this.props.name,href:this.props.href,target:this.props.target,tabIndex:t,className:e,"data-xb-content":this.props._uid},s)}}),n.create("xb-link",[n.mixin.eDisabled]);var p=n.view.create({displayName:"XBButtonContent",propTypes:{ico:r.PropTypes.object},getDefaultProps:function(){return{ico:{}}},shouldComponentUpdate:function(e){return!n.utils.equals(e,this.props)},render:function(){var e=n.utils.merge({},this.props.ico),t=[r.DOM.span({className:"_content-content",key:"content","data-xb-content":this.props._uid},this.props.children)];if(!n.utils.isEmptyObject(e)&&e.type){e.key="ico";var s=n.view.get("xb-ico")(e);e.float&&"left"!==e.float?"right"===e.float&&t.push(s):t.unshift(s)}return r.DOM.span({className:"_content"},t)}}),a=n.view.register("xb-button",[n.utils.exportPropTypes("xb-ico"),{displayName:"xb-button",propTypes:{children:r.PropTypes.renderable,size:r.PropTypes.oneOf(["s","m","l","xl"]),theme:r.PropTypes.oneOf(["normal","action","dark","flying","pseudo-inverted","pseudo","promo"]),type:r.PropTypes.oneOf(["label","inline","link","file","button","submit","checkbox","radio"]),target:r.PropTypes.oneOf(["_blank","_self","_parent","_top"]),value:r.PropTypes.string,href:r.PropTypes.string,name:r.PropTypes.string,title:r.PropTypes.string,form:r.PropTypes.string,"for":r.PropTypes.string,tabindex:r.PropTypes.string,multiple:r.PropTypes.bool,autofocus:r.PropTypes.bool,disabled:r.PropTypes.bool,checked:r.PropTypes.bool,required:r.PropTypes.bool},statics:{filterIcoProps:function(e){return n.utils.mapObject(n.utils.filterObject(e,n.utils.filterPropsPrefixIco),n.utils.mapPropsPrefixIco)}},getDefaultProps:function(){return{size:"m",theme:"normal",type:"button",tabindex:"0",children:String.fromCharCode(160),checked:!1,multiple:!1,autofocus:!1,disabled:!1,required:!1}},getInitialState:function(){return{checked:this.props.checked}},componentWillReceiveProps:function(e){this.setState({checked:e.checked})},componentWillUpdate:function(e,t){"radio"===e.type&&t.checked&&n.utils.resetLastRadioChecked(this,e.name)},componentWillMount:function(){"radio"===this.props.type&&this.state.checked&&n.utils.resetLastRadioChecked(this,this.props.name)},_onChange:function(e){this.setState({checked:e.target.checked})},render:function(){var e={"xb-button":!0,_disabled:this.props.disabled};this.props.theme&&(e["_theme-"+this.props.theme]=!0),this.props.size&&(e["_size-"+this.props.size]=!0),e=r.addons.classSet(e);var t=a.filterIcoProps(this.props),s=this.props.tabindex,i=this.props.type;if(this.props.disabled&&(s="-1"),"link"===i)return r.DOM.a({className:e,href:this.props.href,name:this.props.name,target:this.props.target,title:this.props.title,tabIndex:s},p({_uid:this.props._uid,ico:t},this.props.children));if("file"===i)return r.DOM.label({className:e},r.DOM.span({className:"_xb-file-intruder"},r.DOM.span({className:"_xb-file-intruder-inner"},r.DOM.input({className:"_xb-file-intruder-input",type:"file",name:this.props.name,title:this.props.title,disabled:this.props.disabled,multiple:this.props.multiple,autoFocus:this.props.autofocus,tabIndex:s}),r.DOM.span({className:"_xb-file-intruder-focus"}))),p({_uid:this.props._uid,ico:t},this.props.children));if("label"===i||"checkbox"===i||"radio"===i){var o=[];return"checkbox"===i||"radio"===i?(o.push(r.DOM.input({key:"checkControl",type:i,className:"_xb-check_controller",name:this.props.name,value:this.props.value,disabled:this.props.disabled,defaultChecked:this.props.checked,checked:this.state.checked,autoFocus:this.props.autofocus,readOnly:!0,onChange:this._onChange,required:this.props.required,tabIndex:s})),o.push(a(n.utils.merge({},this.props,{key:"content",type:"inline",tabindex:null}))),e=r.addons.classSet({"xb-button":!0,"_theme-check":!0,_disabled:this.props.disabled})):(o.push(r.DOM.span({key:"file-intruder",className:"_xb-file-intruder"},r.DOM.span({className:"_xb-file-intruder-inner"},r.DOM.input({className:"_xb-file-intruder-input",type:"button",disabled:this.props.disabled,autoFocus:this.props.autofocus,tabIndex:s}),r.DOM.span({className:"_xb-file-intruder-focus"})))),o.push(p({key:"content",_uid:this.props._uid,ico:t},this.props.children))),r.DOM.label({className:e,form:this.props.form,htmlFor:this.props["for"],title:this.props.title},o)}return"inline"===i?r.DOM.span({className:e,tabIndex:s},p({_uid:this.props._uid,ico:t},this.props.children)):r.DOM.button({className:e,type:i,form:this.props.form,title:this.props.title,name:this.props.name,value:this.props.value,tabIndex:s,disabled:this.props.disabled,autoFocus:this.props.autofocus},p({_uid:this.props._uid,ico:t},this.props.children))}}]);n.create("xb-button",[n.mixin.eDisabled,n.mixin.eChecked,n.mixin.eInputValueProps,n.mixin.eFocus,{prototype:Object.create(HTMLButtonElement.prototype),accessors:{defaultValue:{get:function(){var e=this.attrs.type;return"checkbox"===e||"radio"===e?"on":""}}}}]);var l=n.view.create({displayName:"XBInputController",propTypes:{className:r.PropTypes.string,name:r.PropTypes.string,disabled:r.PropTypes.bool,multiline:r.PropTypes.bool,required:r.PropTypes.bool,readOnly:r.PropTypes.bool,autosize:r.PropTypes.bool,autoFocus:r.PropTypes.bool,rows:r.PropTypes.string,cols:r.PropTypes.string,placeholder:r.PropTypes.string,value:r.PropTypes.string,tabIndex:r.PropTypes.string,autocomplete:r.PropTypes.oneOf(["on","off"]),onChange:r.PropTypes.func,onHintToggle:r.PropTypes.func,isPlaceholderHint:r.PropTypes.bool},getDefaultProps:function(){return{value:""}},componentDidUpdate:function(e){this._recalculateSize(),this._dispatchEventToggleHint(e.value,this.props.value)},componentDidMount:function(){this._recalculateSize()},_dispatchEventToggleHint:function(e,t){if(this.props.isPlaceholderHint){var s=Boolean(e),i=Boolean(t);s^i&&this.props.onHintToggle(s&&!i)}},_recalculateSize:function(){if(this.props.autosize){var e=this.getDOMNode();this.props.multiline?(e.style.height="0px",e.style.height=e.scrollHeight+"px"):(e.style.width="20px",e.style.width=(e.scrollWidth<20?20:e.scrollWidth)+"px")}},render:function(){var e=this.props.tabIndex;return this.props.disabled&&e&&(e="-1"),this.props.multiline?r.DOM.textarea({value:this.props.value,className:this.props.className,name:this.props.name,disabled:this.props.disabled,required:this.props.required,readOnly:this.props.readOnly,autoFocus:this.props.autoFocus,rows:this.props.rows,cols:this.props.cols,placeholder:this.props.placeholder,tabIndex:e,autocomplete:this.props.autocomplete,onChange:this.props.onChange}):r.DOM.input({value:this.props.value,type:"text",className:this.props.className,name:this.props.name,disabled:this.props.disabled,required:this.props.required,readOnly:this.props.readOnly,autoFocus:this.props.autoFocus,placeholder:this.props.placeholder,tabIndex:e,autocomplete:this.props.autocomplete,onChange:this.props.onChange})}}),c=n.view.register("xb-input",[n.utils.exportPropTypes("xb-link"),{displayName:"xb-input",propTypes:{id:r.PropTypes.string,"class":r.PropTypes.string,name:r.PropTypes.string,disabled:r.PropTypes.bool,autosize:r.PropTypes.bool,multiline:r.PropTypes.bool,required:r.PropTypes.bool,readonly:r.PropTypes.bool,reset:r.PropTypes.bool,autofocus:r.PropTypes.bool,ghost:r.PropTypes.bool,type:r.PropTypes.oneOf(["text","number","date","datetime","email","month","range","search","tel","time","url","week","color"]),size:r.PropTypes.oneOf(["s","m","l","xl"]),autocomplete:r.PropTypes.oneOf(["on","off"]),rows:r.PropTypes.string,cols:r.PropTypes.string,placeholder:r.PropTypes.string,value:r.PropTypes.string,prefix:r.PropTypes.string,postfix:r.PropTypes.string,tabindex:r.PropTypes.string,"xb-link":r.PropTypes.string},statics:{filterLinkProps:function(e){return n.utils.mapObject(n.utils.filterObject(e,n.utils.filterPropsPrefixLink),n.utils.mapPropsPrefixLink)}},shouldComponentUpdate:function(e,t){return!n.utils.equals(e,this.props)||!n.utils.equals(t,this.state)},getDefaultProps:function(){return{value:"",type:"text",size:"m",rows:"4"}},getInitialState:function(){return{value:this.props.value}},componentDidMount:function(){this.refs.controller._dispatchEventToggleHint("",this.props.value)},_onChange:function(e){this.setState({value:e.target.value})},_onHintToggle:function(e){this.refs.placeholder.getDOMNode().style.visibility=e?"inherit":"hidden"},_isComplex:function(){return this.props.postfix||this.props.prefix||this.props.reset||this.props.autosize||this.props["xb-link"]},_onClickReset:function(){this.setState({value:""})},render:function(){var e=this._isComplex(),t={"xb-input":!0,_disabled:Boolean(this.props.disabled),_autosize:Boolean(this.props.autosize),_ghost:Boolean(this.props.ghost)};this.props.size&&(t["_size-"+this.props.size]=!0),e?t._complex=!0:t._simple=!0,t=r.addons.classSet(t);var s=!1;if(e){var i=[];if(this.props.placeholder&&(s=!0,i.push(r.DOM.span({ref:"placeholder",key:"placeholder",className:"_hint"},r.DOM.span({className:"_hint-inner"},this.props.placeholder)))),this.props["xb-link"]){var o=c.filterLinkProps(this.props);o.theme="input",o.key="label",i.push(n.view.get("xb-link")(o,this.props["xb-link"]))}return this.props.prefix&&i.push(r.DOM.span({key:"prefix",className:"_left"},this.props.prefix)),this.props.postfix&&i.push(r.DOM.span({key:"postfix",className:"_right"},this.props.postfix)),this.props.reset&&i.push(r.DOM.span({key:"reset",className:"_reset",onClick:this._onClickReset})),i.push(r.DOM.span({key:"content",className:"_content"},l({key:"controller",ref:"controller",className:"_controller",value:this.state.value,name:this.props.name,disabled:this.props.disabled,required:this.props.required,readOnly:this.props.readonly,multiline:this.props.multiline,autoFocus:this.props.autofocus,rows:this.props.rows,cols:this.props.cols,tabIndex:this.props.tabindex,autocomplete:this.props.autocomplete,autosize:this.props.autosize,onChange:this._onChange,onHintToggle:this._onHintToggle,isPlaceholderHint:s}),r.DOM.span({key:"view",className:"_view"}))),r.DOM.label({className:t},i)}return l({key:"controller",ref:"controller",className:t,value:this.state.value,name:this.props.name,disabled:this.props.disabled,required:this.props.required,readOnly:this.props.readonly,multiline:this.props.multiline,autoFocus:this.props.autofocus,rows:this.props.rows,cols:this.props.cols,placeholder:this.props.placeholder,tabIndex:this.props.tabindex,autocomplete:this.props.autocomplete,autosize:this.props.autosize,onChange:this._onChange,onHintToggle:this._onHintToggle,isPlaceholderHint:s})}}]);n.create("xb-input",[n.mixin.eDisabled,n.mixin.eInputValueState,n.mixin.eFocus,{prototype:Object.create(HTMLElement.prototype)}]);n.view.register("xb-checkbox",[{displayName:"xb-checkbox",propTypes:{children:r.PropTypes.renderable,size:r.PropTypes.oneOf(["s","m"]),value:r.PropTypes.string,name:r.PropTypes.string,title:r.PropTypes.string,form:r.PropTypes.string,"for":r.PropTypes.string,tabindex:r.PropTypes.string,autofocus:r.PropTypes.bool,checked:r.PropTypes.bool,disabled:r.PropTypes.bool,required:r.PropTypes.bool},getDefaultProps:function(){return{size:"m",children:"",value:"on",tabindex:"0",checked:!1,disabled:!1,autofocus:!1,required:!1}},getInitialState:function(){return{checked:this.props.checked}},componentWillReceiveProps:function(e){this.setState({checked:e.checked})},_onChange:function(e){this.setState({checked:e.target.checked})},render:function(){var e={"xb-checkbox":!0,_disabled:this.props.disabled};this.props.size&&(e["_size-"+this.props.size]=!0),e=r.addons.classSet(e);var t=this.props.tabindex;return this.props.disabled&&(t="-1"),r.DOM.label({className:e,title:this.props.title,form:this.props.form,htmlFor:this.props["for"]},r.DOM.input({type:"checkbox",className:"_xb-check_controller",name:this.props.name,value:this.props.value,disabled:this.props.disabled,defaultChecked:this.props.checked,checked:this.state.checked,autoFocus:this.props.autofocus,readOnly:!0,onChange:this._onChange,required:this.props.required,tabIndex:t}),r.DOM.span({className:"_xb-checkbox_flag _xb-check_flag"},r.DOM.span({className:"_xb-checkbox_flag-icon"})),r.DOM.span({"data-xb-content":this.props._uid},this.props.children))}}]);n.create("xb-checkbox",[n.mixin.eDisabled,n.mixin.eChecked,n.mixin.eInputValueProps,n.mixin.eFocus,{prototype:Object.create(HTMLInputElement.prototype),accessors:{defaultValue:{get:function(){return"on"}}}}]);n.view.register("xb-radio",[{displayName:"xb-radio",propTypes:{children:r.PropTypes.renderable,size:r.PropTypes.oneOf(["s","m"]),value:r.PropTypes.string,name:r.PropTypes.string,title:r.PropTypes.string,form:r.PropTypes.string,"for":r.PropTypes.string,tabindex:r.PropTypes.string,autofocus:r.PropTypes.bool,checked:r.PropTypes.bool,disabled:r.PropTypes.bool,required:r.PropTypes.bool},getDefaultProps:function(){return{size:"m",children:"",value:"on",tabindex:"0",checked:!1,disabled:!1,autofocus:!1,required:!1}},getInitialState:function(){return{checked:this.props.checked}},componentWillReceiveProps:function(e){this.setState({checked:e.checked})},componentWillUpdate:function(e,t){t.checked&&n.utils.resetLastRadioChecked(this,e.name)},componentWillMount:function(){this.state.checked&&n.utils.resetLastRadioChecked(this,this.props.name)},_onChange:function(e){this.setState({checked:e.target.checked})},render:function(){var e={"xb-radio":!0,_disabled:this.props.disabled};this.props.size&&(e["_size-"+this.props.size]=!0),e=r.addons.classSet(e);var t=this.props.tabindex;return this.props.disabled&&(t="-1"),r.DOM.label({className:e,title:this.props.title,form:this.props.form,htmlFor:this.props["for"]},r.DOM.input({type:"radio",className:"_xb-check_controller",name:this.props.name,value:this.props.value,disabled:this.props.disabled,defaultChecked:this.props.checked,checked:this.state.checked,autoFocus:this.props.autofocus,readOnly:!0,onChange:this._onChange,required:this.props.required,tabIndex:t}),r.DOM.span({className:"_xb-radio_flag _xb-check_flag"},r.DOM.span({className:"_xb-radio_flag-icon"})),r.DOM.span({"data-xb-content":this.props._uid},this.props.children))}}]);n.create("xb-radio",[n.mixin.eDisabled,n.mixin.eChecked,n.mixin.eInputValueProps,n.mixin.eFocus,{prototype:Object.create(HTMLInputElement.prototype),accessors:{defaultValue:{get:function(){return"on"}}}}]);{var d=(n.view.register("xb-popup",[n.mixin.vCommonAttrs,{displayName:"xb-popup",mixins:[r.addons.PureRenderMixin],propTypes:{close:r.PropTypes.bool,theme:r.PropTypes.oneOf(["normal","modal","island","error","blank"])},getDefaultProps:function(){return{close:!1,theme:"normal"}},render:function(){var e=[r.DOM.div({className:"_content",key:"content","data-xb-content":this.props._uid,dangerouslySetInnerHTML:{__html:this.props.children}})];e.unshift(this.template("xb-popup-title",{key:"title",className:"_title"})),this.props.close&&e.unshift(r.DOM.a({key:"close",className:"_close"})),e.push(this.template("xb-popup-buttons",{key:"buttons",className:"_buttons"}));var t={_popup:!0};this.props.theme&&(t["_theme-"+this.props.theme]=!0);var s={className:r.addons.classSet(t)};return r.DOM.div(s,e)}}]),n.create("xb-popup",[{prototype:Object.create(HTMLElement.prototype),events:{"click:delegate(._close)":function(){this.parentNode.parentNode.close()}},accessors:{options:{get:function(){if(this._options)return this._options;var e=n.dom.attrs.get(this,{"optimizations-gpu":!0,target:document.body,"target-parent":!1,"target-attachment":"middle center","target-modifier":"visible","target-offset":t,attachment:"middle center",offset:t,constraints:t});return this._options={enabled:!1,element:this,target:e.target,targetParent:e["target-parent"],attachment:e.attachment,targetAttachment:e["target-attachment"],targetModifier:e["target-modifier"],classPrefix:this.xtagName,optimizations:{gpu:e["optimizations-gpu"]},classes:{element:this.xtagName}},e.offset&&(this._options.offset=e.offset),e["target-offset"]&&(this._options.targetOffset=e["target-offset"]),e.constraints&&(this._options.constraints=JSON.parse(decodeURIComponent(e.constraints))),this._options.targetParent&&(this._options.target=this.parentNode),this._options}},tether:{get:function(){return this._tether?this._tether:(this._tether=new o(this.options),this._tether)}}},methods:{setOptions:function(e){var t=this.tether;this._options=n.utils.merge(!0,this.options,e),t.setOptions(this._options,!1),t.enabled&&t.position()},open:function(e){var t=this.tether;return t.enabled?!1:("object"==typeof e&&this.setOptions(e),t.enable(!0),t.target.xbPopup=this,n.utils.dispatchEvent(this,"open-after"),!0)},close:function(){var e=this.tether;return e.enabled?(n.utils.dispatchEvent(this,"close-before"),e.target.xbPopup=null,e.disable(),e.clearCache(),!0):!1},position:function(){return this.tether.position(),!0}}}]));n.view.register("xb-menuseparator",{displayName:"xb-menuseparator",render:function(){return r.DOM.div({className:"xb-menuseparator"})}})}n.create("xb-menuseparator",[{prototype:Object.create(HTMLElement.prototype)}]);n.view.register("xb-menuitem",[n.mixin.vCommonAttrs,{displayName:"xb-menuitem",mixins:[r.addons.PureRenderMixin],propTypes:{label:r.PropTypes.string.isRequired,disabled:r.PropTypes.bool,selected:r.PropTypes.bool},getDefaultProps:function(){return{disabled:!1,selected:!1}},getInitialState:function(){return{selected:this.props.selected}},componentWillReceiveProps:function(e){this.setState({selected:e.selected})},componentDidMount:function(){},componentWillUnmount:function(){},componentDidUpdate:function(){},_removeSubmenu:function(){this.submenu&&this.submenu.parentNode&&(this.submenu.parentNode.removeChild(this.submenu),this.submenu=null)},render:function(){var e={"xb-menuitem":!0,_disabled:this.props.disabled,_selected:this.state.selected};return this.props.children.trim()&&(e["_menuitem-target-"+this.props._uid]=!0,e._submenu=!0),e=r.addons.classSet(e),r.DOM.div({className:e},r.DOM.span(null,this.props.label))}}]);n.create("xb-menuitem",[n.mixin.eDisabled,{prototype:Object.create(HTMLElement.prototype),events:{"xb-created":s,"xb-repaint":s},accessors:{selected:{attribute:{"boolean":!0}},submenu:{get:function(){if(!this._submenu&&null!==this._submenu){var t=this.content.trim();if(t){var s=e.document.createElement("xb-menu");s.setAttribute("target-attachment","top right"),s.setAttribute("attachment","top left"),s.setAttribute("target","._menuitem-target-"+this.xuid),s.setAttribute("constraints",encodeURIComponent(JSON.stringify([{to:"scrollParent",attachment:"together"}]))),s.innerHTML=t,this._submenu=e.document.body.appendChild(s)}else this._submenu=null}return this._submenu}}}}]);n.view.register("xb-menu",[n.mixin.vCommonAttrs,{displayName:"xb-menu",mixins:[r.addons.PureRenderMixin],propTypes:{type:r.PropTypes.oneOf(["context","toolbar","list"])},getDefaultProps:function(){return{type:"list"}},render:function(){var e={_popup:!0};return e=r.addons.classSet(e),r.DOM.div({className:e,tabIndex:"0","data-xb-content":this.props._uid,dangerouslySetInnerHTML:{__html:this.props.children}})}}]);n.create("xb-menu",[n.mixin.eFocus,{prototype:Object.create(d.prototype||new d),events:{"open-after":function(){this.focus()},"close-before":function(){Array.prototype.forEach.call(this.querySelectorAll(".xb-menu-target"),i),this._selectedItem=null},"keydown:keypass(27)":function(){this.close()},blur:function(){this._selectedItem&&(this._selectedItem.selected=!1,this._selectedItem=null)},"keydown:keypass(40)":function(){var e;if(this._selectedItem)for(e=this._selectedItem.nextElementSibling;e&&(!e.xtagName||"xb-menuitem"!==e.xtagName||e.disabled);)e=e.nextElementSibling;for(e||(e=this.firstChild.firstChild);e&&(!e.xtagName||"xb-menuitem"!==e.xtagName||e.disabled);)e=e.nextElementSibling;this._selectedItem&&e&&this._selectedItem!==e&&(this._selectedItem.selected=!1,this._selectedItem=null),e&&(e.selected=!0,this._selectedItem=e)},"keydown:keypass(38)":function(){var e;if(this._selectedItem){for(e=this._selectedItem.previousElementSibling;e&&(!e.xtagName||"xb-menuitem"!==e.xtagName||e.disabled);)e=e.previousElementSibling;for(e||(e=this._selectedItem.parentNode.lastChild);e&&(!e.xtagName||"xb-menuitem"!==e.xtagName||e.disabled);)e=e.previousElementSibling}else for(e=this.firstChild.firstChild;e&&(!e.xtagName||"xb-menuitem"!==e.xtagName||e.disabled);)e=e.nextElementSibling;this._selectedItem&&e&&this._selectedItem!==e&&(this._selectedItem.selected=!1,this._selectedItem=null),e&&(e.selected=!0,this._selectedItem=e)},"keydown:keypass(39)":function(){},"keydown:keypass(37)":function(){},"mouseover:delegate(xb-menuitem)":function(e){n.utils.event.mouseEnterFilter(this,e,function(){if(!this.disabled){var e=this.parentNode.parentNode;e._selectedItem?e._selectedItem!==this&&(e._selectedItem.selected=!1,e._selectedItem=null):(this.selected=!0,e._selectedItem=this)}})},"mouseout:delegate(xb-menuitem)":function(e){n.utils.event.mouseLeaveFilter(this,e,function(){if(!this.disabled){var e=this.parentNode.parentNode;e._selectedItem&&e._selectedItem!==this&&(e._selectedItem.selected=!1,e._selectedItem=null),this.selected=!1,e._selectedItem=null}})},"mousemove:delegate(xb-menuitem)":function(){if(!this.disabled){var e=this.parentNode.parentNode;e._selectedItem&&e._selectedItem===this||(e._selectedItem&&(e._selectedItem.selected=!1),e._selectedItem=this,this.selected=!0)}},"click:delegate(xb-menuitem)":function(){if(!this.disabled){var e=this.parentNode.parentNode;e._selectedItem&&e._selectedItem===this||(e._selectedItem&&(e._selectedItem.selected=!1),e._selectedItem=this,this.selected=!0),this.opened=!this.opened}}}}]);n.view.register("xb-select",[n.mixin.vCommonAttrs,{displayName:"xb-select",propTypes:{disabled:r.PropTypes.bool,autocomplete:r.PropTypes.oneOf(["on","off"]),autocorrect:r.PropTypes.oneOf(["on","off"]),autocapitalize:r.PropTypes.oneOf(["on","off"]),size:r.PropTypes.string,autofocus:r.PropTypes.bool,form:r.PropTypes.string,multiple:r.PropTypes.bool,name:r.PropTypes.string,required:r.PropTypes.bool},getDefaultProps:function(){return{disabled:!1,tabindex:"1"}},componentDidMount:function(){new o({element:this.refs.dropdown.getDOMNode(),target:this.refs.control.getDOMNode(),attachment:"top left",targetAttachment:"bottom left",classPrefix:"xb-dialog",constraints:[{to:"window",attachment:"together none"}],optimizations:{gpu:!1},classes:{element:"xb-dialog"}})},render:function(){var e={"xb-select":!0,_disabled:this.props.disabled};e=r.addons.classSet(e);var t=this.props.tabindex;return this.props.disabled&&(t="-1"),r.DOM.div({className:e},r.DOM.input({className:"_controller"}),a({ref:"control",type:"inline"}),r.DOM.div({ref:"dropdown",className:"_xb-select-dropdown"},r.DOM.ul({className:"_group"},r.DOM.li({className:"_item"},r.DOM.a({className:"_item-control"},"1")),r.DOM.li({className:"_item"},r.DOM.a({className:"_item-control"},"2")),r.DOM.li({className:"_item"},r.DOM.a({className:"_item-control"},"3")))))}}]);n.create("xb-select",[n.mixin.eDisabled,n.mixin.eFocus,{prototype:Object.create(HTMLSelectElement.prototype)}])}(function(){return this||(1,eval)("this")}());
=======
!function(e,t){"use strict";function s(e){e.xbPopup&&e.xbPopup.close()}var i=e.Tether,o=e.React,r=e.xblocks;r.utils.REG_PROPS_PREFIX_LINK=/^xb-link-/,r.utils.REG_PROPS_PREFIX_ICO=/^xb-ico-/,r.utils.filterPropsPrefixLink=function(e){return r.utils.REG_PROPS_PREFIX_LINK.test(e)},r.utils.mapPropsPrefixLink=function(e,t){return{name:e.replace(r.utils.REG_PROPS_PREFIX_LINK,""),descr:t}},r.utils.filterPropsPrefixIco=function(e){return r.utils.REG_PROPS_PREFIX_ICO.test(e)},r.utils.mapPropsPrefixIco=function(e,t){return{name:e.replace(r.utils.REG_PROPS_PREFIX_ICO,""),descr:t}},r.utils.exportPropTypes=function(e){var t=r.utils.propTypes(e),s={},i=e+"-";for(var o in t)t.hasOwnProperty(o)&&"_"!==o[0]&&(s[i+o]=t[o]);return{propTypes:s}},function(){var e={};r.utils.resetLastRadioChecked=function(t,s){if(t._rootNodeID){s=String(s);var i=e[s];if(i&&i!==t._rootNodeID){var o=r.utils.findReactContainerForID(i);o&&(o.checked=!1)}e[s]=t._rootNodeID}}}(),r.mixin={},r.mixin.eDisabled={accessors:{disabled:{attribute:{"boolean":!0}}}},r.mixin.eChecked={accessors:{checked:{attribute:{"boolean":!0}}},events:{change:function(e){this.checked=e.target.checked}}},r.mixin.eInputValueState={accessors:{value:{get:function(){if(this.mounted)return this.xblock._component.state.value;var e=this.querySelector("input,textarea");return e?e.value:""},set:function(e){if(this.mounted)this.xblock._component.setState({value:String(e)});else{var t=this.querySelector("input,textarea");t&&(t.value=String(e))}}}}},r.mixin.eInputValueProps={accessors:{value:{attribute:{name:"value"},get:function(){return String(this.getAttribute("value")||this.defaultValue||"")}},defaultValue:{get:function(){return""}}}},r.mixin.eFocus={methods:{focus:function(){this.firstChild.focus()},blur:function(){this.firstChild.blur()}}},r.mixin.vChecked={isChecked:function(){return this.refs.checkControl?this.refs.checkControl.getDOMNode().checked:void 0},setChecked:function(e){this.refs.checkControl&&(this.refs.checkControl.getDOMNode().checked=Boolean(e))}},r.mixin.vCommonAttrs={propTypes:{accesskey:o.PropTypes.string,contextmenu:o.PropTypes.string,dir:o.PropTypes.oneOf(["ltr","rtl"]),hidden:o.PropTypes.bool,spellcheck:o.PropTypes.bool,tabindex:o.PropTypes.string,title:o.PropTypes.string}},r.view.register("xb-ico",{displayName:"xb-ico",propTypes:{id:o.PropTypes.string,"class":o.PropTypes.string,alt:o.PropTypes.string,title:o.PropTypes.string,value:o.PropTypes.string,tabindex:o.PropTypes.string,children:o.PropTypes.renderable,size:o.PropTypes.oneOf(["s","m"]),type:o.PropTypes.oneOf(["attention","close","check","download","download-white","dropdown","eye","link","link-white","mail","notification","odnoklassniki","pause","people","play","print","remove","services","settings","three-dots","trash","trash-white","twitter","help","upload","upload-white","vk"]),active:o.PropTypes.bool,disabled:o.PropTypes.bool},getDefaultProps:function(){return{size:"s",children:String.fromCharCode(160)}},render:function(){var e={"xb-ico":!0,_active:this.props.active,_disabled:this.props.disabled};this.props.type&&(e["_type-"+this.props.type]=!0),this.props.size&&(e["_size-"+this.props.size]=!0),e=o.addons.classSet(e);var t=this.props.tabindex;this.props.disabled&&(t="-1");var s=this.props.value||this.props.children;return o.DOM.span({className:e,title:this.props.title,tabIndex:t,"data-xb-content":this.props._uid},s)}}),r.create("xb-ico",[r.mixin.eDisabled,{accessors:{active:{get:function(){return r.dom.attrs.valueConversion("active",this.getAttribute("active"),o.PropTypes.bool)},set:function(e){e?this.setAttribute("active",""):this.removeAttribute("active")}}}}]),r.view.register("xb-link",{displayName:"xb-link",propTypes:{id:o.PropTypes.string,"class":o.PropTypes.string,disabled:o.PropTypes.bool,href:o.PropTypes.string,name:o.PropTypes.string,tabindex:o.PropTypes.string,target:o.PropTypes.oneOf(["_self","_blank","_parent","_top"]),theme:o.PropTypes.oneOf(["normal","outer","pseudo","input"])},getDefaultProps:function(){return{theme:"normal",tabindex:"1"}},render:function(){var e={"xb-link":!0,_disabled:this.props.disabled};this.props.theme&&(e["_theme-"+this.props.theme]=!0);var t=this.props.tabindex;this.props.disabled&&(t="-1"),e=o.addons.classSet(e);var s=this.props.value||this.props.children;return o.DOM.a({id:this.props.id,name:this.props.name,href:this.props.href,target:this.props.target,tabIndex:t,className:e,"data-xb-content":this.props._uid},s)}}),r.create("xb-link",[r.mixin.eDisabled]);var n=r.view.create({displayName:"XBButtonContent",propTypes:{ico:o.PropTypes.object},getDefaultProps:function(){return{ico:{}}},shouldComponentUpdate:function(e){return!r.utils.equals(e,this.props)},render:function(){var e=r.utils.merge({},this.props.ico),t=[o.DOM.span({className:"_content-content",key:"content","data-xb-content":this.props._uid},this.props.children)];if(!r.utils.isEmptyObject(e)&&e.type){e.key="ico";var s=r.view.get("xb-ico")(e);e.float&&"left"!==e.float?"right"===e.float&&t.push(s):t.unshift(s)}return o.DOM.span({className:"_content"},t)}}),p=r.view.register("xb-button",[r.utils.exportPropTypes("xb-ico"),{displayName:"xb-button",propTypes:{children:o.PropTypes.renderable,size:o.PropTypes.oneOf(["s","m","l","xl"]),theme:o.PropTypes.oneOf(["normal","action","dark","flying","pseudo-inverted","pseudo","promo"]),type:o.PropTypes.oneOf(["label","inline","link","file","button","submit","checkbox","radio"]),target:o.PropTypes.oneOf(["_blank","_self","_parent","_top"]),value:o.PropTypes.string,href:o.PropTypes.string,name:o.PropTypes.string,title:o.PropTypes.string,form:o.PropTypes.string,"for":o.PropTypes.string,tabindex:o.PropTypes.string,multiple:o.PropTypes.bool,autofocus:o.PropTypes.bool,disabled:o.PropTypes.bool,checked:o.PropTypes.bool,required:o.PropTypes.bool},statics:{filterIcoProps:function(e){return r.utils.mapObject(r.utils.filterObject(e,r.utils.filterPropsPrefixIco),r.utils.mapPropsPrefixIco)}},getDefaultProps:function(){return{size:"m",theme:"normal",type:"button",tabindex:"0",children:String.fromCharCode(160),checked:!1,multiple:!1,autofocus:!1,disabled:!1,required:!1}},getInitialState:function(){return{checked:this.props.checked}},componentWillReceiveProps:function(e){this.setState({checked:e.checked})},componentWillUpdate:function(e,t){"radio"===e.type&&t.checked&&r.utils.resetLastRadioChecked(this,e.name)},componentWillMount:function(){"radio"===this.props.type&&this.state.checked&&r.utils.resetLastRadioChecked(this,this.props.name)},_onChange:function(e){this.setState({checked:e.target.checked})},render:function(){var e={"xb-button":!0,_disabled:this.props.disabled};this.props.theme&&(e["_theme-"+this.props.theme]=!0),this.props.size&&(e["_size-"+this.props.size]=!0),e=o.addons.classSet(e);var t=p.filterIcoProps(this.props),s=this.props.tabindex,i=this.props.type;if(this.props.disabled&&(s="-1"),"link"===i)return o.DOM.a({className:e,href:this.props.href,name:this.props.name,target:this.props.target,title:this.props.title,tabIndex:s},n({_uid:this.props._uid,ico:t},this.props.children));if("file"===i)return o.DOM.label({className:e},o.DOM.span({className:"_xb-file-intruder"},o.DOM.span({className:"_xb-file-intruder-inner"},o.DOM.input({className:"_xb-file-intruder-input",type:"file",name:this.props.name,title:this.props.title,disabled:this.props.disabled,multiple:this.props.multiple,autoFocus:this.props.autofocus,tabIndex:s}),o.DOM.span({className:"_xb-file-intruder-focus"}))),n({_uid:this.props._uid,ico:t},this.props.children));if("label"===i||"checkbox"===i||"radio"===i){var a=[];return"checkbox"===i||"radio"===i?(a.push(o.DOM.input({key:"checkControl",type:i,className:"_xb-check_controller",name:this.props.name,value:this.props.value,disabled:this.props.disabled,defaultChecked:this.props.checked,checked:this.state.checked,autoFocus:this.props.autofocus,readOnly:!0,onChange:this._onChange,required:this.props.required,tabIndex:s})),a.push(p(r.utils.merge({},this.props,{key:"content",type:"inline",tabindex:null}))),e=o.addons.classSet({"xb-button":!0,"_theme-check":!0,_disabled:this.props.disabled})):(a.push(o.DOM.span({key:"file-intruder",className:"_xb-file-intruder"},o.DOM.span({className:"_xb-file-intruder-inner"},o.DOM.input({className:"_xb-file-intruder-input",type:"button",disabled:this.props.disabled,autoFocus:this.props.autofocus,tabIndex:s}),o.DOM.span({className:"_xb-file-intruder-focus"})))),a.push(n({key:"content",_uid:this.props._uid,ico:t},this.props.children))),o.DOM.label({className:e,form:this.props.form,htmlFor:this.props["for"],title:this.props.title},a)}return"inline"===i?o.DOM.span({className:e,tabIndex:s},n({_uid:this.props._uid,ico:t},this.props.children)):o.DOM.button({className:e,type:i,form:this.props.form,title:this.props.title,name:this.props.name,value:this.props.value,tabIndex:s,disabled:this.props.disabled,autoFocus:this.props.autofocus},n({_uid:this.props._uid,ico:t},this.props.children))}}]);r.create("xb-button",[r.mixin.eDisabled,r.mixin.eChecked,r.mixin.eInputValueProps,r.mixin.eFocus,{prototype:Object.create(HTMLButtonElement.prototype),accessors:{defaultValue:{get:function(){var e=this.attrs.type;return"checkbox"===e||"radio"===e?"on":""}}}}]);var a=r.view.create({displayName:"XBInputController",propTypes:{className:o.PropTypes.string,name:o.PropTypes.string,disabled:o.PropTypes.bool,multiline:o.PropTypes.bool,required:o.PropTypes.bool,readOnly:o.PropTypes.bool,autosize:o.PropTypes.bool,autoFocus:o.PropTypes.bool,rows:o.PropTypes.string,cols:o.PropTypes.string,placeholder:o.PropTypes.string,value:o.PropTypes.string,tabIndex:o.PropTypes.string,autocomplete:o.PropTypes.oneOf(["on","off"]),onChange:o.PropTypes.func,onHintToggle:o.PropTypes.func,isPlaceholderHint:o.PropTypes.bool},getDefaultProps:function(){return{value:""}},componentDidUpdate:function(e){this._recalculateSize(),this._dispatchEventToggleHint(e.value,this.props.value)},componentDidMount:function(){this._recalculateSize()},_dispatchEventToggleHint:function(e,t){if(this.props.isPlaceholderHint){var s=Boolean(e),i=Boolean(t);s^i&&this.props.onHintToggle(s&&!i)}},_recalculateSize:function(){if(this.props.autosize){var e=this.getDOMNode();this.props.multiline?(e.style.height="0px",e.style.height=e.scrollHeight+"px"):(e.style.width="20px",e.style.width=(e.scrollWidth<20?20:e.scrollWidth)+"px")}},render:function(){var e=this.props.tabIndex;return this.props.disabled&&e&&(e="-1"),this.props.multiline?o.DOM.textarea({value:this.props.value,className:this.props.className,name:this.props.name,disabled:this.props.disabled,required:this.props.required,readOnly:this.props.readOnly,autoFocus:this.props.autoFocus,rows:this.props.rows,cols:this.props.cols,placeholder:this.props.placeholder,tabIndex:e,autocomplete:this.props.autocomplete,onChange:this.props.onChange}):o.DOM.input({value:this.props.value,type:"text",className:this.props.className,name:this.props.name,disabled:this.props.disabled,required:this.props.required,readOnly:this.props.readOnly,autoFocus:this.props.autoFocus,placeholder:this.props.placeholder,tabIndex:e,autocomplete:this.props.autocomplete,onChange:this.props.onChange})}}),l=r.view.register("xb-input",[r.utils.exportPropTypes("xb-link"),{displayName:"xb-input",propTypes:{id:o.PropTypes.string,"class":o.PropTypes.string,name:o.PropTypes.string,disabled:o.PropTypes.bool,autosize:o.PropTypes.bool,multiline:o.PropTypes.bool,required:o.PropTypes.bool,readonly:o.PropTypes.bool,reset:o.PropTypes.bool,autofocus:o.PropTypes.bool,ghost:o.PropTypes.bool,type:o.PropTypes.oneOf(["text","number","date","datetime","email","month","range","search","tel","time","url","week","color"]),size:o.PropTypes.oneOf(["s","m","l","xl"]),autocomplete:o.PropTypes.oneOf(["on","off"]),rows:o.PropTypes.string,cols:o.PropTypes.string,placeholder:o.PropTypes.string,value:o.PropTypes.string,prefix:o.PropTypes.string,postfix:o.PropTypes.string,tabindex:o.PropTypes.string,"xb-link":o.PropTypes.string},statics:{filterLinkProps:function(e){return r.utils.mapObject(r.utils.filterObject(e,r.utils.filterPropsPrefixLink),r.utils.mapPropsPrefixLink)}},shouldComponentUpdate:function(e,t){return!r.utils.equals(e,this.props)||!r.utils.equals(t,this.state)},getDefaultProps:function(){return{value:"",type:"text",size:"m",rows:"4"}},getInitialState:function(){return{value:this.props.value}},componentDidMount:function(){this.refs.controller._dispatchEventToggleHint("",this.props.value)},_onChange:function(e){this.setState({value:e.target.value})},_onHintToggle:function(e){this.refs.placeholder.getDOMNode().style.visibility=e?"inherit":"hidden"},_isComplex:function(){return this.props.postfix||this.props.prefix||this.props.reset||this.props.autosize||this.props["xb-link"]},_onClickReset:function(){this.setState({value:""})},render:function(){var e=this._isComplex(),t={"xb-input":!0,_disabled:Boolean(this.props.disabled),_autosize:Boolean(this.props.autosize),_ghost:Boolean(this.props.ghost)};this.props.size&&(t["_size-"+this.props.size]=!0),e?t._complex=!0:t._simple=!0,t=o.addons.classSet(t);var s=!1;if(e){var i=[];if(this.props.placeholder&&(s=!0,i.push(o.DOM.span({ref:"placeholder",key:"placeholder",className:"_hint"},o.DOM.span({className:"_hint-inner"},this.props.placeholder)))),this.props["xb-link"]){var n=l.filterLinkProps(this.props);n.theme="input",n.key="label",i.push(r.view.get("xb-link")(n,this.props["xb-link"]))}return this.props.prefix&&i.push(o.DOM.span({key:"prefix",className:"_left"},this.props.prefix)),this.props.postfix&&i.push(o.DOM.span({key:"postfix",className:"_right"},this.props.postfix)),this.props.reset&&i.push(o.DOM.span({key:"reset",className:"_reset",onClick:this._onClickReset})),i.push(o.DOM.span({key:"content",className:"_content"},a({key:"controller",ref:"controller",className:"_controller",value:this.state.value,name:this.props.name,disabled:this.props.disabled,required:this.props.required,readOnly:this.props.readonly,multiline:this.props.multiline,autoFocus:this.props.autofocus,rows:this.props.rows,cols:this.props.cols,tabIndex:this.props.tabindex,autocomplete:this.props.autocomplete,autosize:this.props.autosize,onChange:this._onChange,onHintToggle:this._onHintToggle,isPlaceholderHint:s}),o.DOM.span({key:"view",className:"_view"}))),o.DOM.label({className:t},i)}return a({key:"controller",ref:"controller",className:t,value:this.state.value,name:this.props.name,disabled:this.props.disabled,required:this.props.required,readOnly:this.props.readonly,multiline:this.props.multiline,autoFocus:this.props.autofocus,rows:this.props.rows,cols:this.props.cols,placeholder:this.props.placeholder,tabIndex:this.props.tabindex,autocomplete:this.props.autocomplete,autosize:this.props.autosize,onChange:this._onChange,onHintToggle:this._onHintToggle,isPlaceholderHint:s})}}]);r.create("xb-input",[r.mixin.eDisabled,r.mixin.eInputValueState,r.mixin.eFocus,{prototype:Object.create(HTMLElement.prototype)}]);r.view.register("xb-checkbox",[{displayName:"xb-checkbox",propTypes:{children:o.PropTypes.renderable,size:o.PropTypes.oneOf(["s","m"]),value:o.PropTypes.string,name:o.PropTypes.string,title:o.PropTypes.string,form:o.PropTypes.string,"for":o.PropTypes.string,tabindex:o.PropTypes.string,autofocus:o.PropTypes.bool,checked:o.PropTypes.bool,disabled:o.PropTypes.bool,required:o.PropTypes.bool},getDefaultProps:function(){return{size:"m",children:"",value:"on",tabindex:"0",checked:!1,disabled:!1,autofocus:!1,required:!1}},getInitialState:function(){return{checked:this.props.checked}},componentWillReceiveProps:function(e){this.setState({checked:e.checked})},_onChange:function(e){this.setState({checked:e.target.checked})},render:function(){var e={"xb-checkbox":!0,_disabled:this.props.disabled};this.props.size&&(e["_size-"+this.props.size]=!0),e=o.addons.classSet(e);var t=this.props.tabindex;return this.props.disabled&&(t="-1"),o.DOM.label({className:e,title:this.props.title,form:this.props.form,htmlFor:this.props["for"]},o.DOM.input({type:"checkbox",className:"_xb-check_controller",name:this.props.name,value:this.props.value,disabled:this.props.disabled,defaultChecked:this.props.checked,checked:this.state.checked,autoFocus:this.props.autofocus,readOnly:!0,onChange:this._onChange,required:this.props.required,tabIndex:t}),o.DOM.span({className:"_xb-checkbox_flag _xb-check_flag"},o.DOM.span({className:"_xb-checkbox_flag-icon"})),o.DOM.span({"data-xb-content":this.props._uid},this.props.children))}}]);r.create("xb-checkbox",[r.mixin.eDisabled,r.mixin.eChecked,r.mixin.eInputValueProps,r.mixin.eFocus,{prototype:Object.create(HTMLInputElement.prototype),accessors:{defaultValue:{get:function(){return"on"}}}}]);r.view.register("xb-radio",[{displayName:"xb-radio",propTypes:{children:o.PropTypes.renderable,size:o.PropTypes.oneOf(["s","m"]),value:o.PropTypes.string,name:o.PropTypes.string,title:o.PropTypes.string,form:o.PropTypes.string,"for":o.PropTypes.string,tabindex:o.PropTypes.string,autofocus:o.PropTypes.bool,checked:o.PropTypes.bool,disabled:o.PropTypes.bool,required:o.PropTypes.bool},getDefaultProps:function(){return{size:"m",children:"",value:"on",tabindex:"0",checked:!1,disabled:!1,autofocus:!1,required:!1}},getInitialState:function(){return{checked:this.props.checked}},componentWillReceiveProps:function(e){this.setState({checked:e.checked})},componentWillUpdate:function(e,t){t.checked&&r.utils.resetLastRadioChecked(this,e.name)},componentWillMount:function(){this.state.checked&&r.utils.resetLastRadioChecked(this,this.props.name)},_onChange:function(e){this.setState({checked:e.target.checked})},render:function(){var e={"xb-radio":!0,_disabled:this.props.disabled};this.props.size&&(e["_size-"+this.props.size]=!0),e=o.addons.classSet(e);var t=this.props.tabindex;return this.props.disabled&&(t="-1"),o.DOM.label({className:e,title:this.props.title,form:this.props.form,htmlFor:this.props["for"]},o.DOM.input({type:"radio",className:"_xb-check_controller",name:this.props.name,value:this.props.value,disabled:this.props.disabled,defaultChecked:this.props.checked,checked:this.state.checked,autoFocus:this.props.autofocus,readOnly:!0,onChange:this._onChange,required:this.props.required,tabIndex:t}),o.DOM.span({className:"_xb-radio_flag _xb-check_flag"},o.DOM.span({className:"_xb-radio_flag-icon"})),o.DOM.span({"data-xb-content":this.props._uid},this.props.children))}}]);r.create("xb-radio",[r.mixin.eDisabled,r.mixin.eChecked,r.mixin.eInputValueProps,r.mixin.eFocus,{prototype:Object.create(HTMLInputElement.prototype),accessors:{defaultValue:{get:function(){return"on"}}}}]);{var c=(r.view.register("xb-popup",[r.mixin.vCommonAttrs,{displayName:"xb-popup",mixins:[o.addons.PureRenderMixin],propTypes:{close:o.PropTypes.bool,theme:o.PropTypes.oneOf(["normal","modal","island","error","blank"])},getDefaultProps:function(){return{close:!1,theme:"normal"}},render:function(){var e=[o.DOM.div({className:"_content",key:"content","data-xb-content":this.props._uid,dangerouslySetInnerHTML:{__html:this.props.children}})];e.unshift(this.template("xb-popup-title",{key:"title",className:"_title"})),this.props.close&&e.unshift(o.DOM.a({key:"close",className:"_close"})),e.push(this.template("xb-popup-buttons",{key:"buttons",className:"_buttons"}));var t={_popup:!0};this.props.theme&&(t["_theme-"+this.props.theme]=!0);var s={className:o.addons.classSet(t)};return o.DOM.div(s,e)}}]),r.create("xb-popup",[{prototype:Object.create(HTMLElement.prototype),events:{"click:delegate(._close)":function(){this.parentNode.parentNode.close()}},accessors:{options:{get:function(){if(this._options)return this._options;var e=r.dom.attrs.get(this,{"optimizations-gpu":!0,target:document.body,"target-parent":!1,"target-attachment":"middle center","target-modifier":"visible","target-offset":t,attachment:"middle center",offset:t,constraints:t});return this._options={enabled:!1,element:this,target:e.target,targetParent:e["target-parent"],attachment:e.attachment,targetAttachment:e["target-attachment"],targetModifier:e["target-modifier"],classPrefix:this.xtagName,optimizations:{gpu:e["optimizations-gpu"]},classes:{element:this.xtagName}},e.offset&&(this._options.offset=e.offset),e["target-offset"]&&(this._options.targetOffset=e["target-offset"]),e.constraints&&(this._options.constraints=JSON.parse(decodeURIComponent(e.constraints))),this._options.targetParent&&(this._options.target=this.parentNode),this._options}},tether:{get:function(){return this._tether?this._tether:(this._tether=new i(this.options),this._tether)}}},methods:{setOptions:function(e){var t=this.tether;this._options=r.utils.merge(!0,this.options,e),t.setOptions(this._options,!1),t.enabled&&t.position()},open:function(e){var t=this.tether;return t.enabled?!1:("object"==typeof e&&this.setOptions(e),t.enable(!0),t.target.xbPopup=this,r.utils.dispatchEvent(this,"open-after"),!0)},close:function(){var e=this.tether;return e.enabled?(r.utils.dispatchEvent(this,"close-before"),e.target.xbPopup=null,e.disable(),e.clearCache(),!0):!1},position:function(){return this.tether.position(),!0}}}]));r.view.register("xb-menuseparator",{displayName:"xb-menuseparator",render:function(){return o.DOM.div({className:"xb-menuseparator"})}})}r.create("xb-menuseparator",[{prototype:Object.create(HTMLElement.prototype)}]);r.view.register("xb-menuitem",[r.mixin.vCommonAttrs,{displayName:"xb-menuitem",mixins:[o.addons.PureRenderMixin],propTypes:{label:o.PropTypes.string.isRequired,disabled:o.PropTypes.bool,selected:o.PropTypes.bool},getDefaultProps:function(){return{disabled:!1,selected:!1}},getInitialState:function(){return{selected:this.props.selected}},componentWillReceiveProps:function(e){this.setState({selected:e.selected})},componentDidMount:function(){},componentWillUnmount:function(){},componentDidUpdate:function(){},_removeSubmenu:function(){this.submenu&&this.submenu.parentNode&&(this.submenu.parentNode.removeChild(this.submenu),this.submenu=null)},render:function(){var e={"xb-menuitem":!0,_disabled:this.props.disabled,_selected:this.state.selected};return this.props.children.trim()&&(e["_menuitem-target-"+this.props._uid]=!0,e._submenu=!0),e=o.addons.classSet(e),o.DOM.div({className:e},o.DOM.span(null,this.props.label))}}]);r.create("xb-menuitem",[r.mixin.eDisabled,{prototype:Object.create(HTMLElement.prototype),events:{"xb-created":function(){this._submenu&&(this._submenu.close(),this._submenu.parentNode.removeChild(this._submenu),this._submenu=t)},"xb-repaint":function(){this._submenu&&(this._submenu.close(),this._submenu.parentNode.removeChild(this._submenu),this._submenu=t)}},accessors:{selected:{attribute:{"boolean":!0}},submenu:{get:function(){if(!this._submenu&&null!==this._submenu){var t=this.content.trim();if(t){var s=e.document.createElement("xb-menu");s.setAttribute("target-attachment","top right"),s.setAttribute("attachment","top left"),s.setAttribute("target","._menuitem-target-"+this.xuid),s.setAttribute("constraints",encodeURIComponent(JSON.stringify([{to:"scrollParent",attachment:"together"}]))),s.innerHTML=t,this._submenu=e.document.body.appendChild(s)}else this._submenu=null}return this._submenu}}}}]);r.view.register("xb-menu",[r.mixin.vCommonAttrs,{displayName:"xb-menu",mixins:[o.addons.PureRenderMixin],propTypes:{type:o.PropTypes.oneOf(["context","toolbar","list"])},getDefaultProps:function(){return{type:"list"}},render:function(){var e={_popup:!0};return e=o.addons.classSet(e),o.DOM.div({className:e,tabIndex:"0","data-xb-content":this.props._uid,dangerouslySetInnerHTML:{__html:this.props.children}})}}]);r.create("xb-menu",[r.mixin.eFocus,{prototype:Object.create(c.prototype||new c),events:{"open-after":function(){this.focus()},"close-before":function(){Array.prototype.forEach.call(this.querySelectorAll(".xb-menu-target"),s),this._selectedItem=null},"keydown:keypass(27)":function(){this.close()},blur:function(){this._selectedItem&&(this._selectedItem.selected=!1,this._selectedItem=null)},"keydown:keypass(40)":function(){var e;if(this._selectedItem)for(e=this._selectedItem.nextElementSibling;e&&(!e.xtagName||"xb-menuitem"!==e.xtagName||e.disabled);)e=e.nextElementSibling;for(e||(e=this.firstChild.firstChild);e&&(!e.xtagName||"xb-menuitem"!==e.xtagName||e.disabled);)e=e.nextElementSibling;this._selectedItem&&e&&this._selectedItem!==e&&(this._selectedItem.selected=!1,this._selectedItem=null),e&&(e.selected=!0,this._selectedItem=e)},"keydown:keypass(38)":function(){var e;if(this._selectedItem){for(e=this._selectedItem.previousElementSibling;e&&(!e.xtagName||"xb-menuitem"!==e.xtagName||e.disabled);)e=e.previousElementSibling;for(e||(e=this._selectedItem.parentNode.lastChild);e&&(!e.xtagName||"xb-menuitem"!==e.xtagName||e.disabled);)e=e.previousElementSibling}else for(e=this.firstChild.firstChild;e&&(!e.xtagName||"xb-menuitem"!==e.xtagName||e.disabled);)e=e.nextElementSibling;this._selectedItem&&e&&this._selectedItem!==e&&(this._selectedItem.selected=!1,this._selectedItem=null),e&&(e.selected=!0,this._selectedItem=e)},"keydown:keypass(39)":function(){},"keydown:keypass(37)":function(){},"mouseover:delegate(xb-menuitem)":function(e){r.utils.event.mouseEnterFilter(this,e,function(){if(!this.disabled){var e=this.parentNode.parentNode;e._selectedItem?e._selectedItem!==this&&(e._selectedItem.selected=!1,e._selectedItem=null):(this.selected=!0,e._selectedItem=this)}})},"mouseout:delegate(xb-menuitem)":function(e){r.utils.event.mouseLeaveFilter(this,e,function(){if(!this.disabled){var e=this.parentNode.parentNode;e._selectedItem&&e._selectedItem!==this&&(e._selectedItem.selected=!1,e._selectedItem=null),this.selected=!1,e._selectedItem=null}})},"mousemove:delegate(xb-menuitem)":function(){if(!this.disabled){var e=this.parentNode.parentNode;e._selectedItem&&e._selectedItem===this||(e._selectedItem&&(e._selectedItem.selected=!1),e._selectedItem=this,this.selected=!0)}},"click:delegate(xb-menuitem)":function(){if(!this.disabled){var e=this.parentNode.parentNode;e._selectedItem&&e._selectedItem===this||(e._selectedItem&&(e._selectedItem.selected=!1),e._selectedItem=this,this.selected=!0),this.opened=!this.opened}}}}]);r.view.register("xb-select",[r.mixin.vCommonAttrs,{displayName:"xb-select",propTypes:{disabled:o.PropTypes.bool,autocomplete:o.PropTypes.oneOf(["on","off"]),autocorrect:o.PropTypes.oneOf(["on","off"]),autocapitalize:o.PropTypes.oneOf(["on","off"]),size:o.PropTypes.string,autofocus:o.PropTypes.bool,form:o.PropTypes.string,multiple:o.PropTypes.bool,name:o.PropTypes.string,required:o.PropTypes.bool},getDefaultProps:function(){return{disabled:!1,tabindex:"1"}},componentDidMount:function(){new i({element:this.refs.dropdown.getDOMNode(),target:this.refs.control.getDOMNode(),attachment:"top left",targetAttachment:"bottom left",classPrefix:"xb-dialog",constraints:[{to:"window",attachment:"together none"}],optimizations:{gpu:!1},classes:{element:"xb-dialog"}})},render:function(){var e={"xb-select":!0,_disabled:this.props.disabled};e=o.addons.classSet(e);var t=this.props.tabindex;return this.props.disabled&&(t="-1"),o.DOM.div({className:e},o.DOM.input({className:"_controller"}),p({ref:"control",type:"inline"}),o.DOM.div({ref:"dropdown",className:"_xb-select-dropdown"},o.DOM.ul({className:"_group"},o.DOM.li({className:"_item"},o.DOM.a({className:"_item-control"},"1")),o.DOM.li({className:"_item"},o.DOM.a({className:"_item-control"},"2")),o.DOM.li({className:"_item"},o.DOM.a({className:"_item-control"},"3")))))}}]);r.create("xb-select",[r.mixin.eDisabled,r.mixin.eFocus,{prototype:Object.create(HTMLSelectElement.prototype)}])}(function(){return this||(1,eval)("this")}());
>>>>>>> findReactContainerForID
