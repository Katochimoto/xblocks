!function(e,t){"use strict";var s=e.React,o=e.xblocks;o.dom.attrs.ARRTS_BOOLEAN=o.dom.attrs.ARRTS_BOOLEAN.concat(["multiline","autosize","reset","ghost"]),o.utils.compact=function(e){for(var t in e)e.hasOwnProperty(t)&&(e[t]||delete e[t]);return e},o.utils.toAttrsName=function(e){switch(e){case"class":return"className";case"tabindex":return"tabIndex";case"autofocus":return"autoFocus";default:return e}},o.utils.normalizeAttrsName=function(e){var t={};return Object.keys(e).forEach(function(s){t[o.utils.toAttrsName(s)]=e[s]}),t},o.view.register("xb-ico",{displayName:"xb-ico",propTypes:{id:s.PropTypes.string,"class":s.PropTypes.string,alt:s.PropTypes.string,value:s.PropTypes.string,children:s.PropTypes.renderable,size:s.PropTypes.oneOf(["s","m","l","xl"]),type:s.PropTypes.oneOf(["attention","close","check","download","download-white","dropdown","eye","link","link-white","mail","notification","odnoklassniki","pause","people","play","print","remove","services","settings","three-dots","trash","trash-white","twitter","help","upload","upload-white","vk"]).isRequired,active:s.PropTypes.bool,disabled:s.PropTypes.bool},getDefaultProps:function(){return{size:"s",children:String.fromCharCode(160)}},render:function(){var e={"xb-ico":!0,_active:this.props.active,_disabled:this.props.disabled};this.props.type&&(e["_type-"+this.props.type]=!0),this.props.size&&(e["_size-"+this.props.size]=!0),e=s.addons.classSet(e);var t=this.props.value||this.props.children;return s.DOM.span({className:e,"data-xb-content":this.props._uid},t)}}),o.create("xb-ico"),o.view.register("xb-link",{displayName:"xb-link",propTypes:{id:s.PropTypes.string,"class":s.PropTypes.string,disabled:s.PropTypes.bool,href:s.PropTypes.string,name:s.PropTypes.string,target:s.PropTypes.oneOf(["_self","_blank","_parent","_top"]),theme:s.PropTypes.oneOf(["normal","outer","pseudo","input"])},getDefaultProps:function(){return{theme:"normal"}},render:function(){var e={"xb-link":!0,_disabled:this.props.disabled};this.props.theme&&(e["_theme-"+this.props.theme]=!0),e=s.addons.classSet(e);var t=this.props.value||this.props.children;return s.DOM.a({id:this.props.id,name:this.props.name,href:this.props.href,target:this.props.target,className:e,"data-xb-content":this.props._uid},t)}}),o.create("xb-link");var r=o.view.create({displayName:"XBButtonContent",propTypes:{ico:s.PropTypes.object},statics:{mapIcoProps:function(e){var t=/^xb-ico-/;return o.utils.mapObject(e,function(e,s){return{name:e.replace(t,""),descr:s}})}},getDefaultProps:function(){return{ico:{}}},shouldComponentUpdate:function(e){return!o.utils.equals(e,this.props)},render:function(){var e=r.mapIcoProps(this.props.ico),t=[s.DOM.span({className:"_content-content",key:"content","data-xb-content":this.props._uid},this.props.children)];if(!o.utils.isEmptyObject(e)&&e.type){e.key="ico";var i=o.view.get("xb-ico")(e);e.float&&"left"!==e.float?"right"===e.float&&t.push(i):t.unshift(i)}return s.DOM.span({className:"_content"},t)}}),i=o.view.register("xb-button",{displayName:"xb-button",propTypes:{id:s.PropTypes.string,"class":s.PropTypes.string,children:s.PropTypes.renderable,size:s.PropTypes.oneOf(["s","m","l","xl"]),theme:s.PropTypes.oneOf(["normal","action","dark","flying","pseudo-inverted","pseudo","promo"]),checked:s.PropTypes.bool,type:s.PropTypes.oneOf(["button","file","submit","label","inline","link"]),target:s.PropTypes.oneOf(["_blank","_self","_parent","_top"]),value:s.PropTypes.string,href:s.PropTypes.string,name:s.PropTypes.string,title:s.PropTypes.string,form:s.PropTypes.string,"for":s.PropTypes.string,tabindex:s.PropTypes.string,multiple:s.PropTypes.bool,autofocus:s.PropTypes.bool,disabled:s.PropTypes.bool},statics:{filterIcoProps:function(e){var t=/^xb-ico-/;return o.utils.filterObject(e,function(e){return t.test(e)})}},getDefaultProps:function(){return{size:"m",theme:"normal",type:"button",children:String.fromCharCode(160)}},render:function(){var e={"xb-button":!0,_disabled:this.props.disabled,_checked:this.props.checked};this.props.theme&&(e["_theme-"+this.props.theme]=!0),this.props.size&&(e["_size-"+this.props.size]=!0),e=s.addons.classSet(e);var o=i.filterIcoProps(this.props),p=this.props.tabindex;return this.props.disabled&&(p="-1"),"link"===this.props.type?s.DOM.a({className:e,href:this.props.href,name:this.props.name,target:this.props.target,title:this.props.title,tabIndex:p},r({_uid:this.props._uid,ico:o},this.props.children)):"file"===this.props.type?s.DOM.label({className:e,tabIndex:p},s.DOM.span({className:"_file-intruder"},s.DOM.span({className:"_file-intruder-inner"},s.DOM.input({className:"_file-intruder-input",type:"file",name:this.props.name,title:this.props.title,disabled:this.props.disabled?"disabled":t,multiple:this.props.multiple?"multiple":t,autoFocus:this.props.autofocus}),s.DOM.span({className:"_file-intruder-focus"}))),r({_uid:this.props._uid,ico:o},this.props.children)):"label"===this.props.type?s.DOM.label({className:e,form:this.props.form,htmlFor:this.props["for"],title:this.props.title,tabIndex:p},r({_uid:this.props._uid,ico:o},this.props.children)):"inline"===this.props.type?s.DOM.span({className:e,tabIndex:p},r({_uid:this.props._uid,ico:o},this.props.children)):s.DOM.button({className:e,type:this.props.type,form:this.props.form,title:this.props.title,name:this.props.name,value:this.props.value,tabIndex:p,disabled:this.props.disabled?"disabled":t,autoFocus:this.props.autofocus},r({_uid:this.props._uid,ico:o},this.props.children))}});o.create("xb-button",{prototype:Object.create(HTMLButtonElement.prototype),accessors:{disabled:{get:function(){return Boolean(o.dom.attrs.getRealValue("disabled",this.getAttribute("disabled")))},set:function(e){e?this.setAttribute("disabled",""):this.removeAttribute("disabled")}}},methods:{focus:function(){this.firstChild.focus()},blur:function(){this.firstChild.blur()}}});var p=o.view.create({displayName:"XBInputController",propTypes:{"class":s.PropTypes.string,name:s.PropTypes.string,disabled:s.PropTypes.bool,multiline:s.PropTypes.bool,required:s.PropTypes.bool,readonly:s.PropTypes.bool,autosize:s.PropTypes.bool,autofocus:s.PropTypes.bool,rows:s.PropTypes.string,cols:s.PropTypes.string,placeholder:s.PropTypes.string,value:s.PropTypes.string,tabindex:s.PropTypes.string,autocomplete:s.PropTypes.oneOf(["on","off"])},shouldComponentUpdate:function(e,t){return!o.utils.equals(e,this.props)||!o.utils.equals(t,this.state)},getInitialState:function(){return{value:this.props.value}},getDefaultProps:function(){return{value:""}},componentDidUpdate:function(e,t){this._recalculateSize(),this._dispatchEventToggleHint(t.value,this.state.value)},componentDidMount:function(){this._recalculateSize()},_dispatchEventToggleHint:function(e,t){var s=Boolean(e),r=Boolean(t);s^r&&o.utils.dispatchEvent(this.getDOMNode(),"_hint-toggle",{detail:{toggle:s&&!r}})},_recalculateSize:function(){var e=this.getDOMNode();this.props.autosize&&(this.props.multiline?(e.style.height="0px",e.style.height=e.scrollHeight+"px"):(e.style.width="20px",e.style.width=(e.scrollWidth<20?20:e.scrollWidth)+"px"))},_onchange:function(e){this.setState({value:e.target.value})},render:function(){var e=this.props.tabindex;return this.props.disabled&&e&&(e="-1"),this.props.multiline?s.DOM.textarea({value:this.state.value,className:this.props["class"],name:this.props.name,disabled:this.props.disabled,required:this.props.required,readOnly:this.props.readonly,autoFocus:this.props.autofocus,rows:this.props.rows,cols:this.props.cols,placeholder:this.props.placeholder,tabIndex:e,autocomplete:this.props.autocomplete,onChange:this._onchange}):s.DOM.input({value:this.state.value,type:"text",className:this.props["class"],name:this.props.name,disabled:this.props.disabled,required:this.props.required,readOnly:this.props.readonly,autoFocus:this.props.autofocus,placeholder:this.props.placeholder,tabIndex:e,autocomplete:this.props.autocomplete,onChange:this._onchange})}});o.view.register("xb-input",{displayName:"xb-input",propTypes:{id:s.PropTypes.string,"class":s.PropTypes.string,name:s.PropTypes.string,disabled:s.PropTypes.bool,autosize:s.PropTypes.bool,multiline:s.PropTypes.bool,required:s.PropTypes.bool,readonly:s.PropTypes.bool,reset:s.PropTypes.bool,autofocus:s.PropTypes.bool,ghost:s.PropTypes.bool,type:s.PropTypes.oneOf(["text","number","date","datetime","email","month","range","search","tel","time","url","week","color"]),size:s.PropTypes.oneOf(["s","m","l","xl"]),autocomplete:s.PropTypes.oneOf(["on","off"]),rows:s.PropTypes.string,cols:s.PropTypes.string,placeholder:s.PropTypes.string,value:s.PropTypes.string,prefix:s.PropTypes.string,postfix:s.PropTypes.string,tabindex:s.PropTypes.string},getDefaultProps:function(){return{value:"",type:"text",size:"m",rows:"4"}},componentDidMount:function(){this.refs.controller.getDOMNode().addEventListener("_hint-toggle",this._hintToggle,!1),this.refs.controller._dispatchEventToggleHint("",this.props.value)},componentWillUnmount:function(){this.refs.controller.getDOMNode().removeEventListener("_hint-toggle",this._hintToggle,!1)},_hintToggle:function(e){this.refs.placeholder.getDOMNode().style.visibility=e.detail.toggle?"inherit":"hidden"},_isComplex:function(){return this.props.postfix||this.props.prefix||this.props.reset||this.props.label||this.props.autosize},_resetClick:function(){this.refs.controller.setState({value:""})},render:function(){var e=o.utils.merge({},this.props),t=this._isComplex(),r={"xb-input":!0,_disabled:Boolean(e.disabled),_autosize:Boolean(e.autosize),_ghost:Boolean(e.ghost)};if(e.size&&(r["_size-"+e.size]=!0),t?r._complex=!0:r._simple=!0,r=s.addons.classSet(r),t){var i=[];e.placeholder&&i.push(s.DOM.span({ref:"placeholder",key:"placeholder",className:"_hint"},s.DOM.span({className:"_hint-inner"},e.placeholder))),e.label&&i.push(o.view.get("xb-link")({type:"input",key:"label"})),e.prefix&&i.push(s.DOM.span({key:"prefix",className:"_left"},e.prefix)),e.postfix&&i.push(s.DOM.span({key:"postfix",className:"_right"},e.postfix)),e.reset&&i.push(s.DOM.span({key:"reset",className:"_reset",onClick:this._resetClick}));var n=o.utils.merge({},e);return n["class"]="_controller",n.key="controller",n.ref="controller",delete n.placeholder,i.push(s.DOM.span({key:"content",className:"_content"},[p(n),s.DOM.span({key:"view",className:"_view"})])),s.DOM.label({className:r},i)}return e["class"]=r,e.ref="controller",p(e)}}),o.create("xb-input")}(function(){return this||(1,eval)("this")}());