!function(t,e){"use strict";function n(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}}function r(){return t.navigator&&/Trident/.test(t.navigator.userAgent)}if(!r()&&(t.msSetImmediate||t.setImmediate))return void(t.setImmediate||(t.setImmediate=t.msSetImmediate,t.clearImmediate=t.msClearImmediate));var o=t.document,i=Array.prototype.slice,s=Object.prototype.toString,a={};a.polifill={},a.nextId=1,a.tasks={},a.lock=!1,a.run=function(e){if(a.lock)t.setTimeout(a.wrap(a.run,e),0);else{var n=a.tasks[e];if(n){a.lock=!0;try{n()}finally{a.clear(e),a.lock=!1}}}},a.wrap=function(t){var n=i.call(arguments,1);return function(){t.apply(e,n)}},a.create=function(t){return a.tasks[a.nextId]=a.wrap.apply(e,t),a.nextId++},a.clear=function(t){delete a.tasks[t]},a.polifill.messageChannel=function(){var e=new t.MessageChannel;return e.port1.onmessage=function(t){a.run(Number(t.data))},function(){var t=a.create(arguments);return e.port2.postMessage(t),t}},a.polifill.nextTick=function(){return function(){var e=a.create(arguments);return t.process.nextTick(a.wrap(a.run,e)),e}},a.polifill.postMessage=function(){var e="setImmediate$"+Math.random()+"$",n=function(n){n.source===t&&"string"==typeof n.data&&0===n.data.indexOf(e)&&a.run(Number(n.data.slice(e.length)))};return t.addEventListener?t.addEventListener("message",n,!1):t.attachEvent("onmessage",n),function(){var n=a.create(arguments);return t.postMessage(e+n,"*"),n}},a.polifill.readyStateChange=function(){var t=o.documentElement;return function(){var e=a.create(arguments),n=o.createElement("script");return n.onreadystatechange=function(){a.run(e),n.onreadystatechange=null,t.removeChild(n),n=null},t.appendChild(n),e}},a.polifill.setTimeout=function(){return function(){var e=a.create(arguments);return t.setTimeout(a.wrap(a.run,e),0),e}};var u;u=r()?"setTimeout":"[object process]"===s.call(t.process)?"nextTick":n()?"postMessage":t.MessageChannel?"messageChannel":o&&"onreadystatechange"in o.createElement("script")?"readyStateChange":"setTimeout";var l=Object.getPrototypeOf&&Object.getPrototypeOf(t);l=l&&l.setTimeout?l:t,l.setImmediate=a.polifill[u](),l.setImmediate.usePolifill=u,l.msSetImmediate=l.setImmediate,l.clearImmediate=a.clear,l.msClearImmediate=a.clear}(function(){return this||(1,eval)("this")}()),function(t,e){"use strict";var n=t.React;t.xblocks=t.xblocks||{};var r=t.xblocks,o=t.document,i=Object.prototype.toString,s=Array.prototype.forEach,a=function(){};r.utils=r.utils||{},r.utils.REG_TYPE_EXTRACT=/\s([a-zA-Z]+)/,r.utils.REG_PRISTINE=/^[\$_a-z][\$\w]*$/i,r.utils.SELECTOR_TMPL='script[type="text/x-template"][ref],template[ref]',r.utils.SELECTOR_CONTENT='script[type="text/x-template"]:not([ref]),template:not([ref])',r.utils.log={},r.utils.log.time=function(){},r.utils.seq=function(){var t=0;return function(){return++t}}(),r.utils.type=function(t){if(t===e)return"undefined";if(null===t)return"null";var n=typeof t;if("object"===n&&(n=i.call(t).match(r.utils.REG_TYPE_EXTRACT)[1].toLowerCase()),"number"===n){var o=t.toString();n="NaN"===o?"NaN":-1===o.indexOf(".")?"integer":"float"}return n},r.utils.isPlainObject=function(t){return"object"!==r.utils.type(t)?!1:t.constructor&&!t.constructor.prototype.hasOwnProperty("isPrototypeOf")?!1:!0},r.utils.pristine=function(e){if(!e)return!1;var n=t[e];if(!n)return!1;if(!r.utils.REG_PRISTINE.test(e))return!1;var o=typeof n;if("function"!==o&&"object"!==o)return!1;var i=new RegExp("function\\s+"+e+"\\(\\s*\\)\\s*{\\s*\\[native code\\]\\s*}");return i.test(n)&&("function"!==o||n.valueOf&&n.valueOf()===n)?!0:!1},r.utils.merge=function(){var t,n,o,i,s,a,u=arguments[0]||{},l=1,c=arguments.length,p=!1;for("boolean"==typeof u&&(p=u,u=arguments[l]||{},l++),"object"!=typeof u&&"function"!=typeof u&&(u={}),l===c&&(u=this,l--);c>l;l++)if(null!=(t=arguments[l]))for(n in t)o=u[n],i=t[n],u!==i&&(p&&i&&(r.utils.isPlainObject(i)||(s=Array.isArray(i)))?(s?(s=!1,a=o&&Array.isArray(o)?o:[]):a=o&&r.utils.isPlainObject(o)?o:{},u[n]=r.utils.merge(p,a,i)):i!==e&&(u[n]=i));return u},r.utils.lazy=function(e,n){return e._args||(e._args=[]),e._args.push(n),e._timer||(e._timer=t.setImmediate(function(){e._timer=0;var t=e._args;e._args=[],e(t)})),e},r.utils._equal={array:function(t,e){var n=0,o=t.length;if(o!==e.length)return!1;for(;o>n;n++)if(!r.utils.equals(t[n],e[n]))return!1;return!0},object:function(t,e){var n;for(n in t){if(!e.hasOwnProperty(n))return!1;if(!r.utils.equals(t[n],e[n]))return!1}for(n in e)if(!t.hasOwnProperty(n))return!1;return!0},date:function(t,e){return t.getTime()===e.getTime()},regexp:function(t,e){return t.toString()===e.toString()},"function":function(t,e){return t.toString()===e.toString()}},r.utils.equals=function(t,e){if(t===e)return!0;var n=r.utils.type(t),o=r.utils.type(e);return n!==o?!1:r.utils._equal.hasOwnProperty(n)?r.utils._equal[n](t,e):t==e},r.utils.propTypes=function(t){var e=r.view.get(t);return e?e.propTypes?e.propTypes:e.originalSpec&&e.originalSpec.propTypes?e.originalSpec.propTypes:{}:{}},function(){var t={};r.utils.tmpl=function(e,n){return t.hasOwnProperty(e)||(t[e]=new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+e.replace(/[\r\t\n]/g," ").split("<%").join("	").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("	").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');")),n?t[e](n):t[e]}}(),r.dom=r.dom||{},r.dom.attrs=r.dom.attrs||{},r.dom.attrs.ARRTS_BOOLEAN=["active","autofocus","checked","defer","disabled","ismap","multiple","readonly","required","selected","xb-static"],r.dom.attrs.XB_ATTRS={STATIC:"xb-static"},r.dom.ELEMENT_PROTO=(t.HTMLElement||t.Element).prototype,r.dom.attrs.get=function(t,e){if(1!==t.nodeType||!t.hasAttributes())return e;var o;for(o in e)e.hasOwnProperty(o)&&t.hasAttribute(o)&&(e[o]="boolean"==typeof e[o]?r.dom.attrs.valueConversion(o,t.getAttribute(o),n.PropTypes.bool):t.getAttribute(o));return e},r.dom.attrs.toObject=function(t){var e={};return 1===t.nodeType&&t.hasAttributes()&&s.call(t.attributes,r.dom.attrs._toObjectIterator,e),e},r.dom.attrs._toObjectIterator=function(t){this[t.nodeName]=t.value},r.dom.attrs.valueConversion=function(t,e,o){switch(o||("true"===e||"false"===e||-1!==r.dom.attrs.ARRTS_BOOLEAN.indexOf(t))&&(o=n.PropTypes.bool),o){case n.PropTypes.bool:return Boolean(e===!0||""===e||t===e||"true"===e);case n.PropTypes.string:return String(e);case n.PropTypes.number:return Number(e);default:return e}},r.dom.attrs.typeConversion=function(t,e){e=e||{};var n;for(n in t)t.hasOwnProperty(n)&&(t[n]=r.dom.attrs.valueConversion(n,t[n],e[n]));return t},r.dom.contentNode=function(t){var e;return t.xuid&&1===t.nodeType&&t.hasChildNodes()&&(e=t.querySelector('[data-xb-content="'+t.xuid+'"]'),e||(e=t.querySelector(r.utils.SELECTOR_CONTENT))),e||t},r.dom.upgrade=function(){return t.CustomElements&&"function"==typeof t.CustomElements.upgrade?t.CustomElements.upgrade:a}(),r.dom.upgradeAll=function(){return t.CustomElements&&"function"==typeof t.CustomElements.upgradeAll?t.CustomElements.upgradeAll:a}(),r.dom.cloneNode=function(t,e){return r.dom.ELEMENT_PROTO.cloneNode.call(t,e)},r.dom.outerHTML=function(){var e,n,r=o.createElementNS("http://www.w3.org/1999/xhtml","_");if(r.hasOwnProperty("outerHTML"))e=function(){return this.outerHTML},n=function(t){this.outerHTML=t};else{var i=t.XMLSerializer&&new t.XMLSerializer,s=/\sxmlns=\"[^\"]+\"/;e=i?function(){return i.serializeToString(this).replace(s,"")}:function(){r.appendChild(this.cloneNode(!1));var t=r.innerHTML.replace("><",">"+this.innerHTML+"<");return r.innerHTML="",t},n=function(e){var n,o=this,i=o.parentNode;if(!i)throw t.DOMException.code=t.DOMException.NOT_FOUND_ERR,t.DOMException;for(r.innerHTML=e;n=r.firstChild;)i.insertBefore(n,o);i.removeChild(o)}}return{get:e,set:n}}(),r.event=r.event||{},r.event.Custom=function(){return r.utils.pristine("CustomEvent")?t.CustomEvent:function(){var e,n=t.document,r=!1;try{r=Boolean(n.createEvent("CustomEvent"))}catch(o){}return e=r?function(t,e){e=e||{};var r=Boolean(e.bubbles),o=Boolean(e.cancelable),i=n.createEvent("CustomEvent");return i.initCustomEvent(t,r,o,e.detail),i}:function(t,e){e=e||{};var r=Boolean(e.bubbles),o=Boolean(e.cancelable),i=n.createEvent("Event");return i.initEvent(t,r,o),i.detail=e.detail,i},e.prototype=t.Event.prototype,e}()}(),r.event.dispatch=function(t,e,n){t.dispatchEvent(new r.event.Custom(e,n||{}))},r.react=r.react||{},r.react.unmountComponentAtNode=function(t){return n.unmountComponentAtNode(t)?!0:!1},r.react.render=function(t,e,r){return n.render(t,e,r)},r.tag=t.xtag,r.view={};var u={},l={propTypes:{_uid:n.PropTypes.node,_container:n.PropTypes.any,children:n.PropTypes.node,"xb-static":n.PropTypes.bool},template:function(t,e){var r=this.props._container&&this.props._container.xtmpl;return"object"==typeof r&&null!==r&&r.hasOwnProperty(t)?(e=e||{},e.dangerouslySetInnerHTML={__html:this._templatePrepare(r[t])},n.createElement("div",e)):null},container:function(){return this.props._container}},c={_templatePrepare:function(t){return t}};r.view.create=function(t){return t=Array.isArray(t)?t:[t],t.unshift(!0,{},c),t.push(l),n.createClass(r.utils.merge.apply({},t))},r.view.register=function(t,e){if(n.DOM.hasOwnProperty(t))throw'Specified item "'+t+'" is already defined';return n.DOM[t]=r.view.create(e),u[t]=n.createFactory(n.DOM[t]),n.DOM[t]},r.view.get=function(t){return n.DOM[t]},r.view.getFactory=function(t){return u[t]};var p={init:function(t){return t.xtagName?!1:(t.xtagName=t.tagName.toLowerCase(),t.xtmpl={},t.xuid=r.utils.seq(),t.xprops=r.utils.propTypes(t.xtagName),t.xinserted=!1,!0)},tmplCompile:function(t){this.xtmpl[t.getAttribute("ref")]=t.innerHTML},create:function(t){t.hasChildNodes()&&s.call(t.querySelectorAll(r.utils.SELECTOR_TMPL),p.tmplCompile,t),t.xblock=r.element.create(t)},createLazy:function(t){t.forEach(p.create)}},d={lifecycle:{created:function(){r.utils.log.time(this,"xb_init"),r.utils.log.time(this,"dom_inserted"),p.init(this)},inserted:function(){if(!this.xinserted){p.init(this),this.xinserted=!0;var t=Boolean(this.querySelector("script"));t?r.utils.lazy(p.createLazy,this):p.create(this),r.utils.log.time(this,"dom_inserted")}},removed:function(){if(this.xinserted=!1,this.xblock){var t=this.content;this.xblock.destroy(),this.xblock=e,this.content=t}},attributeChanged:function(t,e,n){t===r.dom.attrs.XB_ATTRS.STATIC&&null===n&&this.xblock&&!this.mounted&&this.xblock.repaint()}},accessors:{mounted:{get:function(){return Boolean(this.xblock&&this.xblock.isMounted())}},content:{get:function(){return this.mounted?this.xblock.getMountedContent():r.dom.contentNode(this).innerHTML},set:function(t){this.mounted?this.xblock.setMountedContent(t):(r.dom.contentNode(this).innerHTML=t,this.upgrade())}},attrs:{get:function(){return r.dom.attrs.toObject(this)}},state:{get:function(){var t,e=r.dom.attrs.toObject(this),n=this.xprops,o=r.tag.tags[this.xtagName].accessors,i=d.accessors;for(t in o)n.hasOwnProperty(t)&&o.hasOwnProperty(t)&&!i.hasOwnProperty(t)&&(e[t]=this[t]);return r.dom.attrs.typeConversion(e,n),e}},outerHTML:r.dom.outerHTML},methods:{upgrade:function(){r.dom.upgradeAll(this)},cloneNode:function(t){var e=r.dom.cloneNode(this,!1);return r.dom.upgrade(e),e.xtmpl=this.xtmpl,e.xinserted=!1,t&&(e.content=this.content),e}}};r.create=function(t,e){e=Array.isArray(e)?e:[e],e.unshift(!0,{}),e.push(d);for(var n,o,i=2,s=e.length;s>i;i++)o=e[i],r.utils.isPlainObject(o)&&(!n&&o.prototype&&(n=o.prototype),delete o.prototype);return e=r.utils.merge.apply({},e),n&&(e.prototype=n),r.tag.register(t,e)};var m={checkNodeChange:function(t){return"childList"===t.type},checkAttributesChange:function(t){return"attributes"===t.type},filterAttributesRemove:function(t){return"attributes"===t.type&&!this._node.hasAttribute(t.attributeName)},mapAttributesName:function(t){return t.attributeName},globalInitEvent:function(e){r.event.dispatch(t,"xb-created",{detail:{records:e}})},globalRepaintEvent:function(e){r.event.dispatch(t,"xb-repaint",{detail:{records:e}})}};r.element=function(t){t.xblock=this,this._node=t,this._init(t.state,t.content,this._callbackInit)},r.element.create=function(t){return new r.element(t)},r.element.prototype._node=null,r.element.prototype._component=null,r.element.prototype._observer=null,r.element.prototype.destroy=function(){r.react.unmountComponentAtNode(this._node),this.unmount(),r.event.dispatch(this._node,"xb-destroy",{bubbles:!1,cancelable:!1})},r.element.prototype.unmount=function(){this._observer&&this._observer.disconnect(),this.isMounted()&&this._component.unmountComponent(),this._component=null},r.element.prototype.update=function(t,e,n){if(this.isMounted()){var o=this._node.state,i="setProps";if("object"==typeof t){var s;for(s in t)t.hasOwnProperty(s)&&(o[s]=t[s])}if(Array.isArray(e)&&e.length){i="replaceProps",o=r.utils.merge(!0,{},this.getMountedProps(),o);for(var a=e.length;a--;)o.hasOwnProperty(e[a])&&delete o[e[a]]}o.hasOwnProperty(r.dom.attrs.XB_ATTRS.STATIC)?this.repaint(n):(r.dom.attrs.typeConversion(o,this._node.xprops),this._component[i](o,this._callbackUpdate.bind(this,n)))}},r.element.prototype.repaint=function(t){var e,n=this._node.content,r=this._node.state,o=this.getMountedProps()||{};for(e in o)o.hasOwnProperty(e)&&(r[e]=o[e]);this.destroy(),this._init(r,n,this._callbackRepaint.bind(this,t))},r.element.prototype.isMounted=function(){return Boolean(this._component&&this._component.isMounted())},r.element.prototype.setMountedContent=function(t){this.isMounted()&&this.update({children:t})},r.element.prototype.getMountedContent=function(){return this.isMounted()?this._component.props.children:void 0},r.element.prototype.getMountedComponent=function(){return this.isMounted()?this._component:void 0},r.element.prototype.getMountedProps=function(){return this.isMounted()?this._component.props:null},r.element.prototype._init=function(t,e,o){if(!this.isMounted()){t._uid=this._node.xuid,t._container=this._node,r.dom.attrs.typeConversion(t,this._node.xprops);var i=r.view.getFactory(this._node.xtagName)(t,e);if(t.hasOwnProperty(r.dom.attrs.XB_ATTRS.STATIC))this.unmount(),r.utils.log.time(this._node,"react_render"),this._node.innerHTML=n.renderToStaticMarkup(i),r.utils.log.time(this._node,"react_render"),this._node.upgrade(),o&&o.call(this);else{r.utils.log.time(this._node,"react_render");var s=this;this._component=r.react.render(i,this._node,function(){r.utils.log.time(s._node,"react_render"),s._component=this,s._callbackRender(o)})}}},r.element.prototype._callbackInit=function(){r.event.dispatch(this._node,"xb-created"),r.utils.lazy(m.globalInitEvent,this._node),r.utils.log.time(this._node,"xb_init")},r.element.prototype._callbackRepaint=function(t){r.event.dispatch(this._node,"xb-repaint"),r.utils.lazy(m.globalRepaintEvent,this._node),t&&t.call(this)},r.element.prototype._callbackRender=function(e){this._node.upgrade(),this._observer||(this._observer=new t.MutationObserver(this._callbackMutation.bind(this))),this._observer.observe(this._node,{attributes:!0,childList:!0,characterData:!0,subtree:!1,attributeOldValue:!1,characterDataOldValue:!1,attributeFilter:Object.keys(this._node.xprops)}),e&&e.call(this)},r.element.prototype._callbackMutation=function(t){if(this.isMounted())if(t.some(m.checkNodeChange))this.repaint();else if(t.some(m.checkAttributesChange)){var e=t.filter(m.filterAttributesRemove,this).map(m.mapAttributesName);this.update(null,e)}},r.element.prototype._callbackUpdate=function(t){this._node.upgrade(),r.event.dispatch(this._node,"xb-update"),t&&t.call(this)}}(function(){return this||(1,eval)("this")}());