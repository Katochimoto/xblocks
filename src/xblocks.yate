module "xblocks"

external scalar xb-modernizr(scalar)
external scalar xb-inarray(scalar, array)

match .* xb-core-attrs {
    value = scalar(.)
    boolAttrs = [
        'disabled'
        'multiple'
        'checked'
    ]

    if (xb-inarray(name(), boolAttrs)) {
        if (value == true()) {
            @{name()} = name()
        }

    } else if (name() == 'class') {
        @class += (
            ' '
            value
        )

    } else {
        @{name()} = value
    }
}

match .* xb-core-content (escape = '') {
    <content>
        if (!xb-modernizr('createshadowroot')) {
            if (boolean(escape)) {
                .content
            } else {
                html(.content)
            }
        }
    </content>
}
